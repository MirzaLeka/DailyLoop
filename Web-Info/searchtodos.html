<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>My Todo App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <!-- Bootstrap CSS script -->
  <link rel="stylesheet" href="../Resources/scripts/bootstrap.css">
  <!-- jQuery script -->
  <script src="../Resources/scripts/jquery.js"></script>
  <!-- Bootstrap JS script -->
  <script src="../Resources/scripts/bootstrap.js"></script>
  <!-- Font Awesome script -->
  <script src="../Resources/scripts/fontawesome.js"></script>


  <!-- Styles-->
  <link rel="stylesheet" type="text/css" href="../Resources/css/navbar.css"/>
  
</head>
<body>

  
    <div id="formWrapper">
        <input class="insertTodoForm" autofocus placeholder="Search Todos" type="text" id="text"/> 
        <button class="insertTodoBtn" onclick="search()">Search</button>
    </div>


      <br>       <br>       <br> 

        <!-- Navbar-->

  <div class="nav">

      <!-- <h2 style="width: 100%; margin: 0 auto; color: #FFF; text-align: center;">My Todo App</h2> -->

      <ul class="navbarUl">


        <!-- Aligh documents-->

        <li class="navbarLi" id="alignLi">Align &#9660
            <ul class="innerUl" id="alignUl">
              <label class="radio">
              <input class="alignRadio" name="align" type="radio" >
              <span style="font-weight: 100; text-align: center;">List</span>
            </label>
            <label class="radio">
              <input class="alignRadio" name="align" type="radio">
              <span style="font-weight: 100; text-align: center;">Grid</span>
            </label>
              
            </ul>
          
          </li>


          <!-- Display documents -->
        
          <li class="navbarLi" id="displayLi">Display &#9660
            <ul class="innerUl" id="displayUl">
              <label class="radio">
              <input class="displayRadio"  name="display" type="radio" checked>
              <span style="font-weight: 100; text-align: center;">All</span>
            </label>
            <label class="radio">
              <input class="displayRadio" name="display" type="radio">
              <span style="font-weight: 100; text-align: center;">Completed</span>
            </label>
            <label class="radio">
              <input class="displayRadio" name="display" type="radio">
              <span style="font-weight: 100; text-align: center;">Not completed</span>
            </label>
          
            </ul>
          
          </li>

            <!-- Sort documents -->

    <li class="navbarLi" id="sortLi">Sort &#9660
    <ul class="innerUl" id="sortUl">
      <label class="radio">
      <input class="sortRadio" name="sort" type="radio" checked>
      <span style="font-weight: 100; text-align: center;">Date created</span>
    </label>
    <label class="radio">
      <input class="sortRadio" name="sort" type="radio">
      <span style="font-weight: 100; text-align: center;">Date completed <span style="color: gold">&#x21E7;</span></span>
    </label>
    <label class="radio">
      <input class="sortRadio" name="sort" type="radio">
      <span style="font-weight: 100; text-align: center;">Date completed <span style="color: gold">&#x21E9;</span></span>
    </label>
    <label class="radio">
        <input class="sortRadio" name="sort" type="radio">
        <span style="font-weight: 100; text-align: center;">Last updated</span>
      </label>
      
    </ul>
    
  </li>


    <!-- Limit results -->

    <li class="navbarLi" id="limitLi">Limit &#9660
      <ul class="innerUl" id="limitUl">
        <label class="radio">
        <input class="limitRadio"  name="limit" type="radio" checked>
        <span style="font-weight: 100; text-align: center;">No limit</span>
      </label>
      <label class="radio">
        <input class="limitRadio" name="limit" type="radio">
        <span style="font-weight: 100; text-align: center;">1</span>
      </label>
      <label class="radio">
        <input class="limitRadio" name="limit" type="radio">
        <span style="font-weight: 100; text-align: center;">5</span>
      </label>
      <label class="radio">
        <input class="limitRadio" name="limit" type="radio">
        <span style="font-weight: 100; text-align: center;">10</span>
      </label>
      <label class="radio">
        <input class="limitRadio" name="limit" type="radio">
        <span style="font-weight: 100; text-align: center;">15</span>
        </label>
        <label class="radio">
         <input class="limitRadio" name="limit" type="radio">
          <span style="font-weight: 100; text-align: center;">20</span>
        </label>    
    
      </ul>
    
    </li>


        <!-- Themes results -->

        <li class="navbarLi" id="themeLi">Theme &#9660
          <ul class="innerUl" id="themeUl">
            <label class="radio">
            <input class="themeRadio"  name="theme" type="radio" checked>
            <span style="font-weight: 100; text-align: center;">Default</span>
          </label>
          <label class="radio">
            <input class="themeRadio" name="theme" type="radio">
            <span style="font-weight: 100; text-align: center;">Blue / Orange</span> <!-- Cobalt -->
          </label>
          <label class="radio">
            <input class="themeRadio" name="theme" type="radio">
            <span style="font-weight: 100; text-align: center;">Red / Black</span> <!-- Red Dragon -->
          </label>
          <label class="radio">
            <input class="themeRadio" name="theme" type="radio">
            <span style="font-weight: 100; text-align: center;">Purple / White</span> <!-- Snowball -->
          </label>
          <label class="radio">
            <input class="themeRadio" name="theme" type="radio">
            <span style="font-weight: 100; text-align: center;">Green / Black</span> <!-- Matrix -->
            </label> 
            <label class="radio">
              <input class="themeRadio" name="theme" type="radio">
              <span style="font-weight: 100; text-align: center;">Forest / Mud</span> <!-- Camo -->
              </label> 
        
          </ul>
        
        </li>


      </ul>
  </div>
  
  <!-- / Navbar-->

      <br>       <br>       <br>


    <div class="container-fluid bg-3" style="color: white;">
      <div id="showList" class="row">



      </div>
    </div>

    <br> <br>

    <select id="selectTag">
        <option class="optionTag" value=0>No tag</option>
        <option class="optionTag" value=1>Birthday</option>
        <option class="optionTag" value=2>Clean</option>
        <option class="optionTag" value=3>Coffee</option>
        <option class="optionTag" value=4>Date</option>
        <option class="optionTag" value=5>Drive</option>
        <option class="optionTag" value=6>Event</option>
        <option class="optionTag" value=7>Food</option>
        <option class="optionTag" value=8>Game</option>
        <option class="optionTag" value=9>Holiday</option>
        <option class="optionTag" value=10>Movie</option>
        <option class="optionTag" value=11>Music</option>
        <option class="optionTag" value=12>Pet</option>
        <option class="optionTag" value=13>Pray</option>
        <option class="optionTag" value=14>Relax</option>
        <option class="optionTag" value=15>Sleep</option>
        <option class="optionTag" value=16>Shop</option>
        <option class="optionTag" value=17>Shower</option>
        <option class="optionTag" value=18>Sports</option>
        <option class="optionTag" value=19>Travel</option>
        <option class="optionTag" value=20>Work</option>
        <option class="optionTag" value=21>Wedding</option>
        
      </select>
      
      <button class="btn btn-success" onclick="getSelected()">Get Value of Selected</button>
      
      <button class="btn btn-primary" onclick="patch()">PATCH</button>

    <script>

  


      function getSelected() {

        var select = $('select').find(":selected").attr("value"); // .find(":selected").text() would return text of selected
      alert(select);

      // you will post value of selected to DB
      // once get request starts, you'll pull that value through API

      // example: data.todos[i].nesto <img src="arrayOfImages[selectedValue]" SOMETHING LIKE THIS :)

}





      let align = "";

      $(document).ready(() => {

        
        // Fake GET request

        if (4 < 5) {
          $(".optionTag:eq(5)").attr('selected', true); // DIsplay SELECTED OPTION once you pull data from DB
        }

      

        // Fake GET request

        if (2 < 5) {
          $(".alignRadio:eq(1)").attr('checked', true); // give 0th or whichever element attribute selected once it comes from DB
        }

          align =  $(".alignRadio:checked").parent(".radio").text(); // get it's text
          align = align.trim(); // trim it

          // GET AND POST in the same function
          // document on ready to initiate default GET
          // second get should be throught search() function that starts with GET, ends with POST but does not refresh
          // so the second GET doesn't pull from DB. It just plays with data, while the first one pulls from POSTED data

      });

      /* Align documents */

      

      $(".alignRadio").click(function() {

      align = $(this).parent(".radio").text();
      align = align.trim();  

      search();
  });


      /* Display documents */

      let display = "Display all";

      $(".displayRadio").click(function() {

      display = $(this).parent(".radio").text();
      display = display.trim();  

      search();

      // TODO: Disable date COMPLETED when you display NOT completed 

  });

      /* Sort documents */

      let sort = 'Date created';

      $(".sortRadio").click(function() {

      sort = $(this).parent(".radio").text();
      sort = sort.trim();  

      search();
  });

        /* Limit search */

        let limit = "No limit";

        $(".limitRadio").click(function() {

        limit = $(this).parent(".radio").text();
        limit = limit.trim();  

        search();
      });


      /* Themes */

      $(".themeRadio").click(() => {

        $("body").css("background", "#09223f");

      });




    function search() {

    let text = $("input").val();

    if (text == '') {
      return console.log("Enter text to complete the search");
    }

    // let completed =  $('#filterCompleted').find(":selected").text();

 //   let limit = $('#limitResults').find(":selected").text();

// POST previous variables to backend but don't use location.reload() when posting

      $.ajax({
        type: "GET",
        url: `/todos/${text}/${display}/${limit}/${sort}/${align}`,
        success: function (data) {

          if (data.todos.length == 0) {
            return console.log("No match found");
          }

          console.log(data);
          var li = '';
          
            for (var i = 0; i < data.todos.length; i++) {

          if (align == "List") {
            li+= `<li>Text: ${data.todos[i].text}, Completed: ${data.todos[i].completed}</li>`;
          }
           else {
             li+=`
             <div class="col-sm-4">
      
              <div class="grid" style="border: 2px solid white; color: #FFF; height: 350px; position: relative;">
                
                  <img src="../Resources/img/tags/pray.jpg" class="img-responsive" style="width:100%; height: 250px;" alt="Image">

                  
      <div class="col-xs-12" >  
        
        <h3 style="color: white">${data.todos[i].text}</h3>
        
        </div>



        <div>
          
          <div class="col-xs-6">${data.todos[i].completed}</div> <div class="col-xs-6">${data.todos[i].completedAt}</div>

          </div>
        
        </div>
                

         <div class="outer" title="Complete Todo" style="position: absolute; top: 10%; right: 5%;">
 <div class="switch"></div>
 </div>
  </div>    
                
                
                </div>      
      
              </div>
             `;
              }

          }

          $("#showList").html(li);

        }
      })


    }



function patch() {

var data = {
 "align": align
};


$.ajax({
url: "/todos",
data: JSON.stringify(data),
type: 'PATCH',
contentType: 'application/json',
processData: false,
dataType: 'json',
success: function (data) {
location.reload();
}


});


}


   function post() {


var data = {
"text": "COD",
"align": align,
"display": display,
"sort" : sort,
"limit": limit
}

$.ajax({
 type: "POST",
 url: "/todos",
 contentType : 'application/json',
 dataType : 'json',
 data : JSON.stringify(data),
 success: function(data) {
 
  location.reload(); 
 }

});



// NEW GET TODOS THAT WILL BE ON HOME PAGE

// $.ajax({
//   type: "GET",
//   url: `/todos/${display}/${limit}/${sort}/${align}`,
//   success: function (data) {

//     if (data.todos.length == 0) {
//       return console.log("No match found");
//     }

//     console.log(data);
//     var li = '';
    
//       for (var i = 0; i < data.todos.length; i++) {

//     if (align == "List") {
//       li+= `<li>Text: ${data.todos[i].text}, Completed: ${data.todos[i].completed}</li>`;
//     }
//      else {
//        li+=`
//        <div class="col-sm-4">

//         <div class="grid" style="border: 2px solid white; color: #FFF; height: 350px; position: relative;">
          
//             <img src="../Resources/img/tags/pray.jpg" class="img-responsive" style="width:100%; height: 250px;" alt="Image">

            
// <div class="col-xs-12" >  
  
//   <h3 style="color: white">${data.todos[i].text}</h3>
  
//   </div>



//   <div>
    
//     <div class="col-xs-6">${data.todos[i].completed}</div> <div class="col-xs-6">${data.todos[i].completedAt}</div>

//     </div>
  
//   </div>
          

//    <div class="outer" title="Complete Todo" style="position: absolute; top: 10%; right: 5%;">
// <div class="switch"></div>
// </div>
// </div>    
          
          
//           </div>      

//         </div>
//        `;
//         }

//     }

//     $("#showList").html(li);

//   }
// });




}









    
    </script>

</body>

</html>