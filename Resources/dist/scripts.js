"use strict";var limit="No limit",display="Display all",sort="Date created";$(window).scroll(function(){$("#info").offset().top+50+$("#info").outerHeight()-$(window).height()<=$(this).scrollTop()?($("#scrollBack").fadeIn(),$("#logoutHeader").css("color","#007BFF"),$("#logoutHeader").on("mouseenter",function(){$(this).css("color","#0064d1")}),$("#logoutHeader").on("mouseleave",function(){$(this).css("color","#007BFF")})):($("#scrollBack").fadeOut(),$("#logoutHeader").css("color","#444"),$("#logoutHeader").on("mouseenter",function(){$(this).css("color","#000")}),$("#logoutHeader").on("mouseleave",function(){$(this).css("color","#444")}))}),$("#scrollBack").click(function(){$("html, body").animate({scrollTop:0},1e3)});var scrollPosition="",addDarkSelect=void 0,idsArr=[];function getTodos(){var e=getCookie()[0].substr(9,999).toString();e=e.trim(),$.ajax({type:"GET",url:"/todos",headers:{"x-auth":e},success:function(e){if(0==e.todos.length)sessionStorage.removeItem("scrollPosition"),$(".notYet").css("display","none"),$("#inputTitle").attr("placeholder","Submit your first todo"),changeQuote(0,0);else{for(var o=0,t=0;t<e.todos.length;t++)1==e.todos[t].completed&&o++;$(".notYet").css("display","block"),$("#inputTitle").attr("placeholder",""),changeQuote(1,e.todos.length-o)}var s="",i="",n="",a="";for(t=0;t<e.todos.length;t++){i=e.todos[t]._id.toString(),n=e.todos[t].text.toString(),a=e.todos[t].description;var l="",d="",r=e.todos[t].text;50<e.todos[t].text.length&&(r=e.todos[t].text.substr(0,50)+"..."),e.todos[t].completed?(l="Completed",d="Completed At: "+e.todos[t].completedAt.substr(12,8)):l="Not completed",s+='<div class="container todoContainer" onclick="addIdToArray(`'+e.todos[t]._id+'`)">\n    \n     <div class="row">\n      <div class="col-sm-9">\n<div class="row">\n<div class="col-sm-12">\n<h3 class="title">'+r+'</h3>\n    </div>\n</div>\n <div class="row">\n      \n <div class="col-sm-6"><p class="status">'+l+'</p></div>\n <div class="col-sm-6"><p class="finished">'+d+'</p> </div>\n  </div>\n        </div>\n    <div class="col-sm-3" style="height: 105px;"> \n    <div class="col-sm-4 todoBtnCol">\n <button class="btn todoBtn" title="Update Todo" onclick="openModal(`'+n+"`, `"+a+"`, "+e.todos[t].completed+",`"+i+"`,`"+e.todos[t].completedAt+"`, "+t+", `"+e.todos[t].createdAt+'`)"><i class="fa fa-pencil" aria-hidden="true"></i></button>\n </div>\n <div class="col-sm-4 todoBtnCol">\n \n <div class="outer" title="Complete Todo" onclick=\'completeTodo('+e.todos[t].completed+",`"+i+"`, "+t+')\'>\n <div class="switch"></div>\n </div>\n  </div>        \n<div class="col-sm-4 todoBtnCol">\n   <button class="btn todoBtn" title="Remove Todo" id="removeTodoBtn" onclick="deleteTodo(`'+i+'`)"><i class="fa fa-times" aria-hidden="true"></i></button>\n         </div>\n    </div>\n         \n      </div>\n </div>'}$("#listOfTodos").append(s);for(t=0;t<e.todos.length;t++)e.todos[t].completed?($(".switch:eq("+t+")").addClass("move"),$(".title:eq("+t+")").css({"text-decoration":"line-through"})):$(".switch:eq("+t+")").removeClass("move");(addDarkSelect=$(".todoContainer")).on("click",function(){$(this).toggleClass("darkSelect")}),$(".outer, .todoBtn").click(function(e){var o=$(window).scrollTop();sessionStorage.setItem("scrollPosition",o),e.stopPropagation(),$(".todoContainer").removeClass("darkSelect"),idsArr=[]})}})}function submit(){var e=$("#inputTitle").val();if(""==e)return $("#submitTodoError").show(),void $("#submitTodoError").text("Please insert text to submit todo.");if(200<e.length)return $("#submitTodoError").show(),void $("#submitTodoError").text("Please keep todo title no longer than 200 characters.");var o={text:e};sessionStorage.removeItem("scrollPosition");var t=getCookie()[0].substr(9,999).toString();t=t.trim(),$.ajax({type:"POST",url:"/todos",contentType:"application/json",dataType:"json",data:JSON.stringify(o),headers:{"x-auth":t},success:function(e){location.reload()}})}function clearSubmitTodoError(){$("#submitTodoError").hide()}function deleteTodo(e){var o=getCookie()[0].substr(9,999).toString();o=o.trim(),$.ajax({url:"/todos/"+e,type:"DELETE",headers:{"x-auth":o},success:function(){location.reload()}})}function deleteAllTodos(){sessionStorage.removeItem("scrollPosition");var e=getCookie()[0].substr(9,999).toString();e=e.trim(),$.ajax({url:"/todos",type:"DELETE",headers:{"x-auth":e},success:function(){}}),window.location.reload()}function completeTodo(e,o,t){var s="";if(e)e=!1,$(".switch:eq("+t+")").removeClass("move"),s=null;else{e=!0,$(".switch:eq("+t+")").addClass("move");var i=(new Date).toString();s=i=i.substr(4,20)}var n={completed:e,completedAt:s},a=getCookie()[0].substr(9,999).toString();a=a.trim(),$.ajax({url:"/todos/"+o,data:JSON.stringify(n),type:"PATCH",contentType:"application/json",processData:!1,dataType:"json",headers:{"x-auth":a},success:function(e){location.reload()}})}function updateTodo(e,o,t,s,i,n){var a=0;e=(e=(e=$("#todoTitleInModal").val()).replace(/"/g,"'")).trim(),o=(o=(o=$("textarea").val()).replace(/"/g,"'")).trim(),""==e?($("#todoTitleInModalError").css("display","block"),$("#todoTitleInModalError").text("Title must have at least one character"),a++):200<e.length&&($("#todoTitleInModalError").show(),$("#todoTitleInModalError").text("Exceeded maximum number of characters (200)"),a++),2e3<o.length&&($("#textareaError").show(),$("#textareaError").text("Exceeded maximum number of characters (2000)"),a++);var l={text:e,description:o,completed:t,completedAt:n},d=getCookie()[0].substr(9,999).toString();d=d.trim(),i&&0==a&&$.ajax({url:"/todos/"+s,data:JSON.stringify(l),type:"PATCH",contentType:"application/json",processData:!1,dataType:"json",headers:{"x-auth":d},success:function(e){$("#myModal").fadeOut(),location.reload()}})}$(document).ready(function(){null!=(scrollPosition=sessionStorage.getItem("scrollPosition"))&&$("html, body").animate({scrollTop:scrollPosition},100),getUser(),startTime(),changeBackgroundImg(),getTodos(),limiting(),sorting(),displaying()});var data={},keepTheDate=null,newDate="";function combineValues(e,o,t,s,i,n,a){"string"!=typeof n&&null!=keepTheDate?keepTheDate=keepTheDate:"string"==typeof n||(keepTheDate=a),"string"==typeof e&&(data.text=e,keepTheDate=$(".switchModal").hasClass("moveModal")?(data.completed=!0,keepTheDate):(data.completed=!1,null),i=!0),"number"==typeof e&&(data.completed=t,i=!1,keepTheDate=t?n:null),updateTodo(data.text,o,data.completed,s,i,keepTheDate)}var modalStatus="",modalFinished="",toggleCounter=0,toggleValue=[];function completeInModal(e,o,t,s,i,n,a){toggleValue[a]=0==toggleCounter?!t:!toggleValue[a];var l=(new Date).toString();l=l.substr(4,20),modalFinished=l,toggleValue[a]?($(".switchModal").addClass("moveModal"),modalStatus="Completed",$("#modalFinished").text(modalFinished)):(modalStatus="Not Completed",$(".switchModal").removeClass("moveModal"),$("#modalFinished").html('<i class="fa fa-question-circle" style="font-size:24px"></i>')),$("#modalStatus").text(modalStatus),toggleCounter++,combineValues(e,o,toggleValue[a],s,i,modalFinished,n)}function openModal(e,o,t,s,i,n,a){modal.style.display="flex",modalFinished=i,modalStatus=t?"Completed":"Not Completed";var l='\n<p class="closeModal" onclick="closeModal(47, '+t+",`"+s+'`, false)">&times</p>\n          \n<h3 class="modalTitle" style="text-align: center;\ndisplay: block;\nmargin: 0 auto;\nwidth: 100%; margin-top: 10px;">Update Todo</h3>\n';$(".modal-header").html(l),mb='<div class="modalPause">  \n<h5 class="pauseDesc">NAME</h5>\n<div class="container bg-3 text-center" style="width: 768px;">\n<div class="row">\n<div class="col-sm-3"> </div>\n<div class="col-sm-6">\n<input id="todoTitleInModal" oninput="oninputTodoTitleInModal()" autofocus style="width: 100%; background: #FFF; border: 2px solid #CCC; color: #000; margin-top: 4px;" />\n<p id="todoTitleInModalError"></p>\n    </div>\n   \n<div class="col-sm-3"> </div>\n        </div>\n</div>  \n </div>  ',mb+='<div class="modalPause">  \n<h5 class="pauseDesc">DESCRIPTION</h5>\n<div class="container bg-3 text-center" style="width: 768px;">\n<div class="row">\n<div class="col-sm-3"> </div>\n<div class="col-sm-6">\n<textarea id="textarea" placeholder="Optional" oninput="oninputTextarea()" rows=5 style="width: 100%; background: #FFF; border: 2px solid #CCC; color: #000; margin-top: 4px; resize: none;"></textarea>\n<p id="textareaError"></p>\n    </div>\n   \n<div class="col-sm-3"> </div>\n        </div>\n</div>  \n </div>  ',mb+=' \n <div class="modalPause">  \n<h5 class="pauseDesc">DETAILS</h5>\n<div class="container bg-3 text-center" style="width: 768px; height: 85px; padding-bottom: 0px; margin-top: 10px;">\n<div class="row">\n<div class="col-sm-3"></div>\n<div class="col-sm-2">\n<p>Status:</p>\n</div>\n<div class="col-sm-2">\n<p id="modalStatus">'+modalStatus+'</p>\n</div>\n<div class="col-sm-2">\n<div class="outerModal" title="Complete Todo" id="toggleBtn" onclick="completeInModal(47, `'+o+"` , "+t+",`"+s+"`, 'noRefresh', `"+i+"`, "+n+')" style="margin: 0 auto; text-align: center">\n<div class="switchModal"></div>\n</div>\n    \n<div class="col-sm-3"></div>\n    </div>\n</div>\n<div class="row" style="padding-top: 15px;">\n<div class="col-sm-3"></div>\n<div class="col-sm-2">\n<p id="completeAtPar">Created   Completed:</p>\n</div>\n<div class="col-sm-2">\n<p class="modalDetails">'+a+'</p>\n</div>\n<div class="col-sm-2">\n<p class="modalDetails" id="modalFinished">'+modalFinished+'</p>\n</div>\n<div class="col-sm-3"></div>\n        </div>\n    </div>\n</div>\n',$(".modal-body").html(mb),t?(modalStatus="Completed",$(".switchModal").addClass("moveModal"),$("#modalFinished").text(modalFinished)):(modalStatus="Not Completed",$(".switchModal").removeClass("moveModal"),$("#modalFinished").html('<i class="fa fa-question-circle" style="font-size:24px"></i>'));var d='<button id="cancelBtn" class="modalBtns" onclick="closeModal(47, '+t+",`"+s+'`, false)">Cancel</button>\n<button id="updateBtn" class="modalBtns" onclick="combineValues(`'+e+"`, `"+o+"`,"+t+",`"+s+"`, true, 4,`"+i+'`)">Update</button>';$(".modal-footer").html(d);var r=e;$("textarea").text(o),$("#todoTitleInModal").val(r)}var modal=document.getElementById("myModal");function closeModal(e,o,t,s){toggleCounter=0,$("#myModal").fadeOut(),combineValues(e,o,t,s)}function oninputTextarea(){$("#textareaError").hide()}function oninputTodoTitleInModal(){$("#todoTitleInModalError").hide()}function startTime(){var e=new Date,o=e.getHours(),t=e.getMinutes(),s=e.getSeconds();t=checkTime(t),s=checkTime(s),o<10&&(o="0"+o),$("#clockTitle").html(o+":"+t+":"+s);setTimeout(startTime,500)}function checkTime(e){return e<10&&(e="0"+e),e}var quotesArray=["“A journey of a thousand miles begins with a single step.”\n    – Lao Tzu","“The only impossible journey is the one you never begin.”\n    – Tony Robbins","“We are what we repeatedly do. Excellence, then, is not an act but a habit.”\n    – Aristotle","“Don’t judge each day by the harvest you reap, but by the seeds that you plant.”\n    – Robert Louis Stevenson","“Writing is an exploration. You start from nothing and learn as you go.”\n    – E. L. Doctorow","“Adapt what is useful, reject what is useless, and add what is specifically your own.”\n    – Bruce Lee","“Start where you are. Use what you have. Do what you can.” \n    – Arthur Ashe","“Good, better, best. Never let it rest. 'Til your good is better and your better is best.” \n    – St. Jerome","“If you can dream it, you can do it.” \n    – Walt Disney","“Setting goals is the first step in turning the invisible into the visible.” \n    – Tony Robbins","“A creative man is motivated by the desire to achieve, not by the desire to beat others.” \n    – Ayn Rand","“He who does not live in the way of his beliefs starts to believe in the way he lives.”\n    – Umar ibn Al-Khattab"],questionsArray=["What's next on your mind?","What's your plan for today?","What do you want to do next?","What is your main focus today?","What's next on your list?"],arrayOfBackgrounds=["../Resources/img/cover/cloudscity.jpeg","../Resources/img/cover/apple.jpeg","../Resources/img/cover/beachananas.jpeg","../Resources/img/cover/beachcity.jpeg","../Resources/img/cover/bike.jpeg","../Resources/img/cover/bulb.jpeg","../Resources/img/cover/boat.jpg","../Resources/img/cover/bottle.jpeg","../Resources/img/cover/cherries.jpeg","../Resources/img/cover/chess.jpeg","../Resources/img/cover/clouds.jpeg","../Resources/img/cover/ferrari.jpeg","../Resources/img/cover/forestroad.jpg","../Resources/img/cover/glasses.jpeg","../Resources/img/cover/guitar.jpg","../Resources/img/cover/headphones.jpeg","../Resources/img/cover/highway.jpeg","../Resources/img/cover/home.jpeg","../Resources/img/cover/jetengine.jpg","../Resources/img/cover/kitten.jpeg","../Resources/img/cover/logs.jpeg","../Resources/img/cover/match.jpg","../Resources/img/cover/parkedinwild.jpeg","../Resources/img/cover/road.jpeg","../Resources/img/cover/rope.jpeg","../Resources/img/cover/sandals.jpeg","../Resources/img/cover/searocks.jpeg","../Resources/img/cover/skynight.jpeg","../Resources/img/cover/thunder.jpeg","../Resources/img/cover/underwater.jpeg","../Resources/img/cover/wing.jpeg","../Resources/img/cover/wolves.jpeg"];function changeQuote(e,o){var t="";0==e?($("#questionsTitle").css("display","none"),$("#quoteTitle").css("display","block"),t=quotesArray[Math.floor(Math.random()*quotesArray.length)],$("#quoteTitle").text(t)):(0==o?$("#quoteTitle").text("You have no unfinished todos"):1==o?$("#quoteTitle").text("You have "+o+" unfinished todo below"):$("#quoteTitle").text("You have "+o+" unfinished todos below"),$("#questionsTitle").css("display","block"),t=questionsArray[Math.floor(Math.random()*questionsArray.length)],$("#questionsTitle").text(t))}function changeBackgroundImg(){var e=(new Date).getDate();$("#openingDiv").fadeTo(500,.5,function(){$(this).css({background:"url('"+arrayOfBackgrounds[e]+"')","background-attachment":"fixed",overflow:"hidden","background-position":"center","background-repeat":"no-repeat","background-size":"cover","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover"})}).fadeTo(500,1)}function limiting(){var t="";["No limit",1,3,5,10,15,20].forEach(function(e,o){t+='\n      <label class="radio">\n      <input class="limitRadio"  name="limit" type="radio">\n      <span style="font-weight: 100; text-align: center;">'+e+"</span>\n      </label>\n    "}),$("#limitUl").append(t),$(".limitRadio:eq(0)").attr("checked",!0),$(".limitRadio").click(function(){limit=(limit=$(this).parent(".radio").text()).trim(),search()})}function sorting(){$(".sortRadio").click(function(){sort=(sort=$(this).parent(".radio").text()).trim(),search()})}function displaying(){var t="";["All","Completed","Not completed"].forEach(function(e,o){t+='\n      <label class="radio">\n                <input class="displayRadio" name="display" type="radio">\n                <span style="font-weight: 100; text-align: center;">'+e+"</span>\n              </label>\n      "}),$("#displayUl").append(t),$(".displayRadio:eq(0)").attr("checked",!0),$(".displayRadio").click(function(){"Not completed"==(display=(display=$(this).parent(".radio").text()).trim())?($(".sortCompleted").attr("disabled",!0),$(".labelCompleted").css({cursor:"default"}),$(".labelCompleted").hover(function(){$(this).css("background","#222")})):($(".sortCompleted").attr("disabled",!1),$(".labelCompleted").css({cursor:"pointer"}),$(".labelCompleted").on("mouseenter",function(){$(this).css("background","#007BFF")}),$(".labelCompleted").on("mouseleave",function(){$(this).css("background","#222")})),search()})}function search(){var e=getCookie()[0].substr(9,999).toString();e=e.trim(),idsArr=[];var o=$(".searchTodosForm").val();""==o&&(o="."),$.ajax({type:"GET",url:"/todos/"+o+"/"+display+"/"+limit+"/"+sort+"/",headers:{"x-auth":e},success:function(e){for(var o="",t="",s="",i="",n=0;n<e.todos.length;n++){t=e.todos[n]._id.toString(),s=e.todos[n].text.toString(),i=e.todos[n].description;var a="",l="",d=e.todos[n].text;50<e.todos[n].text.length&&(d=e.todos[n].text.substr(0,50)+"..."),e.todos[n].completed?(a="Completed",l="Completed At: "+e.todos[n].completedAt.substr(12,8)):a="Not completed",o+='<div class="container todoContainer" onclick="addIdToArray(`'+e.todos[n]._id+'`)">\n                \n                 <div class="row">\n                  <div class="col-sm-9">\n            <div class="row">\n            <div class="col-sm-12">\n            <h3 class="title">'+d+'</h3>\n                </div>\n            </div>\n             <div class="row">\n                  \n             <div class="col-sm-6"><p class="status">'+a+'</p></div>\n             <div class="col-sm-6"><p class="finished">'+l+'</p> </div>\n              </div>\n                    </div>\n                <div class="col-sm-3" style="height: 105px;"> \n                <div class="col-sm-4 todoBtnCol">\n             <button class="btn todoBtn" title="Update Todo" onclick="openModal(`'+s+"`, `"+i+"`, "+e.todos[n].completed+",`"+t+"`,`"+e.todos[n].completedAt+"`, "+n+", `"+e.todos[n].createdAt+'`)"><i class="fa fa-pencil" aria-hidden="true"></i></button>\n             </div>\n             <div class="col-sm-4 todoBtnCol">\n             \n             <div class="outer" title="Complete Todo" onclick=\'completeTodo('+e.todos[n].completed+",`"+t+"`, "+n+')\'>\n             <div class="switch"></div>\n             </div>\n              </div>        \n            <div class="col-sm-4 todoBtnCol">\n               <button class="btn todoBtn" title="Remove Todo" id="removeTodoBtn" onclick="deleteTodo(`'+t+'`)"><i class="fa fa-times" aria-hidden="true"></i></button>\n                     </div>\n                </div>\n                     \n                  </div>\n             </div>'}$(".todoContainer").remove(),$("#listOfTodos").append(o),(addDarkSelect=$(".todoContainer")).on("click",function(){$(this).toggleClass("darkSelect")}),$(".outer, .todoBtn").click(function(e){var o=$(window).scrollTop();sessionStorage.setItem("scrollPosition",o),e.stopPropagation(),$(".todoContainer").removeClass("darkSelect"),idsArr=[]});for(n=0;n<e.todos.length;n++)e.todos[n].completed?($(".switch:eq("+n+")").addClass("move"),$(".title:eq("+n+")").css({"text-decoration":"line-through"})):$(".switch:eq("+n+")").removeClass("move")}})}$("#scrollDown").click(function(){$("html, body").animate({scrollTop:$("#containerBg").offset().top},1e3)}),$(".navbarLi").on("mouseenter",function(){$(this).find(".innerUl").fadeIn()}),$(".navbarLi").on("mouseleave",function(){$(this).find(".innerUl").fadeOut()}),$("#inputTitle").keyup(function(e){13==e.keyCode&&submit()}),$(".searchTodosForm").keyup(function(e){13==e.keyCode&&search()});var addIdToArray=function(o){idsArr.includes(o)?idsArr.splice(idsArr.findIndex(function(e){return e==o})):idsArr.push(o)};function KeyPressCheck(e){if(44==e.keyCode&&addDarkSelect.hasClass("darkSelect")){var o=$(window).scrollTop();sessionStorage.setItem("scrollPosition",o);var t=getCookie()[0].substr(9,999).toString();t=t.trim(),$.ajax({url:"/todos/"+idsArr,type:"DELETE",headers:{"x-auth":t},success:function(){location.reload()}})}}function getCookie(){var e=("; "+document.cookie).split("; "+name+"=");return 2==e.length?e.pop().split(";").shift():e}function getUser(){var e=getCookie()[0].substr(9,999).toString();e=e.trim(),$.ajax({type:"GET",url:"/users/me",headers:{"x-auth":e},success:function(e){document.querySelector("#helloTitle").textContent="Hello "+e.username}})}var logout=function(){var e=getCookie()[0].substr(9,999).toString();e=e.trim(),$.ajax({url:"/users/me/token",type:"DELETE",headers:{"x-auth":e},success:function(){window.location.href="/"}})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsibGltaXQiLCJkaXNwbGF5Iiwid2luZG93Iiwic2Nyb2xsIiwiJCIsIm9mZnNldCIsInRvcCIsIm91dGVySGVpZ2h0IiwidGhpcyIsInNjcm9sbFRvcCIsImZhZGVJbiIsIndTIiwiY3NzIiwib24iLCJjbGljayIsImFuaW1hdGUiLCJzY3JvbGxQb3NpdGlvbiIsImFkZERhcmtTZWxlY3QiLCJpZHNBcnIiLCJ0eXBlIiwiaGVhZGVycyIsInRva2VuIiwiZ2V0Q29va2llIiwic3Vic3RyIiwidG9TdHJpbmciLCJzdWNjZXNzIiwidHJpbSIsImFqYXgiLCJzZXNzaW9uU3RvcmFnZSIsImNoYW5nZVF1b3RlIiwiZGF0YSIsInRvZG9zIiwibGVuZ3RoIiwicmVtb3ZlSXRlbSIsImkiLCJjb21wbGV0ZWQiLCJjb21wbGV0ZWRUb2RvcyIsImxpc3QiLCJhdHRyIiwiaWQiLCJfaWQiLCJ0ZXh0IiwiZGVzY3JpcHRpb24iLCJzaG9ydGVuVGl0bGUiLCJzdGF0dXMiLCJmaW5pc2hlZCIsImNvbXBsZXRlZEF0IiwiY3JlYXRlZEF0IiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJ0ZXh0LWRlY29yYXRpb24iLCJyZW1vdmVDbGFzcyIsInVybCIsInRvZ2dsZUNsYXNzIiwiZSIsImxvY2F0aW9uIiwicmVsb2FkIiwiY3VycmVudFNjcm9sbFBvc2l0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwidmFsIiwic2hvdyIsImRhdGFUeXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImhpZGUiLCJzdHIiLCJ4LWF1dGgiLCJlcnJvckNvdW50ZXIiLCJyZWZyZXNoIiwiY29udGVudFR5cGUiLCJwcm9jZXNzRGF0YSIsInNvbWVJZCIsInVwZGF0ZVRvZG8iLCJrZWVwVGhlRGF0ZSIsImlzQ29tcGxldGVkIiwibW9kYWxTdGF0dXMiLCJtb2RhbEZpbmlzaGVkIiwidG9nZ2xlQ291bnRlciIsInRvZ2dsZVZhbHVlIiwiZmFkZU91dCIsInJlYWR5IiwiZ2V0SXRlbSIsImdldFVzZXIiLCJzdGFydFRpbWUiLCJjaGFuZ2VCYWNrZ3JvdW5kSW1nIiwibGltaXRpbmciLCJzb3J0aW5nIiwiZGlzcGxheWluZyIsImdldFRvZG9zIiwibmV3RGF0ZSIsIm1vZGFsIiwiaHRtbCIsImhhc0NsYXNzIiwibWIiLCJ0ZXh0VmFsdWUiLCJjb21wbGV0ZUluTW9kYWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29tYmluZVZhbHVlcyIsIm9uaW5wdXRUZXh0YXJlYSIsIkRhdGUiLCJzIiwib3Blbk1vZGFsIiwiY2hlY2tUaW1lIiwibWgiLCJwYXJlbnQiLCJzZWFyY2giLCJzb3J0IiwibWYiLCJvbmlucHV0VG9kb1RpdGxlSW5Nb2RhbCIsInRvZGF5IiwiaCIsImdldEhvdXJzIiwibSIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiY29va2llIiwicXVvdGVzQXJyYXkiLCJhcnJheU9mQmFja2dyb3VuZHMiLCJzdWJtaXQiLCJudW0iLCJyYW5kb21RdW90ZSIsImtleUNvZGUiLCJldmVudCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFkZElkVG9BcnJheSIsImluY2x1ZGVzIiwicXVlc3Rpb25zQXJyYXkiLCJmYWRlVG8iLCJiYWNrZ3JvdW5kIiwib3ZlcmZsb3ciLCItbW96LWJhY2tncm91bmQtc2l6ZSIsIi1vLWJhY2tncm91bmQtc2l6ZSIsImFkZExpbWl0IiwibGltIiwibG9nb3V0IiwiYWRkRGlzcGxheSIsImZvckVhY2giLCJkaXMiLCJjdXJzb3IiLCJob3ZlciIsInJlbW92ZSIsInNldEl0ZW0iLCJmaW5kIiwia2V5dXAiLCJzcGxpY2UiLCJmaW5kSW5kZXgiLCJpbmRleCIsInB1c2giLCJLZXlQcmVzc0NoZWNrIiwicGFydHMiLCJzcGxpdCIsIm5hbWUiLCJwb3AiLCJzaGlmdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInVzZXJuYW1lIiwiaHJlZiJdLCJtYXBwaW5ncyI6ImFBR00sSUFBSUEsTUFBUSxXQUFSQSxRQUFRLGNBQ1JDLEtB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QixHQUFxQixJQUFqQkEsRUFBTUQsU0FFRHpHLGNBQWMyRSxTQUFTLGNBQWdCLENBRXhDLElBQUluQyxFQUF5QnJELEVBQUVGLFFBQVFPLFlBQ3ZDbUIsZUFBZW9ILFFBQVEsaUJBQWtCdkYsR0FFekMsSUFFSXBDLEVBRlNDLFlBRU0sR0FBR0MsT0FBTyxFQUFFLEtBQUtDLFdBQ3BDSCxFQUFRQSxFQUFNSyxPQUVmdEIsRUFBRXVCLEtBQUssQ0FDTnlCLElBQUssVUFBWWxDLE9BQ2pCQyxLQUFNLFNBQ05DLFFBQVMsQ0FDTDhDLFNBQVc3QyxHQUVmSSxRQUFTLFdBQ1Q4QixTQUFTQyxhQWV6QixTQUFTbEMsWUFFVCxJQUNJa0ksR0FEUSxLQUFPeEQsU0FBU29CLFFBQ1ZxQyxNQUFNLEtBQU9DLEtBQU8sS0FDdEMsT0FBb0IsR0FBaEJGLEVBQU14SCxPQUNDd0gsRUFBTUcsTUFBTUYsTUFBTSxLQUFLRyxRQUUzQkosRUFLUCxTQUFTdEUsVUFFTCxJQUVJN0QsRUFGU0MsWUFFTSxHQUFHQyxPQUFPLEVBQUUsS0FBS0MsV0FDcENILEVBQVFBLEVBQU1LLE9BRWxCdEIsRUFBRXVCLEtBQUssQ0FDSFIsS0FBTSxNQUNOaUMsSUFBTSxZQUNOaEMsUUFBUyxDQUNKOEMsU0FBVzdDLEdBRWhCSSxRQUFTLFNBQVVLLEdBQ2ZrRSxTQUFTNkQsY0FBYyxlQUFlQyxZQUFjLFNBQVdoSSxFQUFLaUksWUFXNUUsSUFBSXRCLE9BQVMsV0FFVCxJQUVJcEgsRUFGU0MsWUFFTSxHQUFHQyxPQUFPLEVBQUUsS0FBS0MsV0FDcENILEVBQVFBLEVBQU1LLE9BRWR0QixFQUFFdUIsS0FBSyxDQUNQeUIsSUFBSyxrQkFDTGpDLEtBQU0sU0FDTkMsUUFBUyxDQUNMOEMsU0FBVzdDLEdBRWZJLFFBQVMsV0FBYXZCLE9BQU9xRCxTQUFTeUcsS0FBTyIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbiAgICAvKiBEZWZhdWx0IHZhbHVlcyBvZiBuYXZiYXJMaSAqL1xyXG5cclxuICAgICAgbGV0IGxpbWl0ID0gXCJObyBsaW1pdFwiO1xyXG4gICAgICBsZXQgZGlzcGxheSA9IFwiRGlzcGxheSBhbGxcIjtcclxuICAgICAgbGV0IHNvcnQgPSAnRGF0ZSBjcmVhdGVkJztcclxuXHJcblxyXG4gICAgICAvKiBTY3JvbGxpbmcgYmFjayAqL1xyXG5cclxuICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgaFQgPSAkKCcjaW5mbycpLm9mZnNldCgpLnRvcCArIDUwLCAvLyBzaW5jZSAudG9kb0NvbnRhaW5lciBjYW4gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICBoSCA9ICQoJyNpbmZvJykub3V0ZXJIZWlnaHQoKSwgLy8gSSdtIHVzaW5nICNpbmZvICsgNTBweCBzY29sbGVkIGRvd25cclxuICAgICAgICAgICAgd0ggPSAkKHdpbmRvdykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHdTID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgaWYgKHdTID49IChoVCtoSC13SCkpe1xyXG4gICAgICAgICAgJChcIiNzY3JvbGxCYWNrXCIpLmZhZGVJbigpO1xyXG4gICAgICAgICAgJChcIiNsb2dvdXRIZWFkZXJcIikuY3NzKFwiY29sb3JcIiwgXCIjMDA3QkZGXCIpO1xyXG5cclxuICAgICAgICAgICQoXCIjbG9nb3V0SGVhZGVyXCIpLm9uKCdtb3VzZWVudGVyJywgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJjb2xvclwiLCBcIiMwMDY0ZDFcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgJChcIiNsb2dvdXRIZWFkZXJcIikub24oJ21vdXNlbGVhdmUnLCAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcImNvbG9yXCIsIFwiIzAwN0JGRlwiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgXHJcblxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICQoXCIjc2Nyb2xsQmFja1wiKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICAgJChcIiNsb2dvdXRIZWFkZXJcIikuY3NzKFwiY29sb3JcIiwgXCIjNDQ0XCIpO1xyXG5cclxuICAgICAgICAgICAkKFwiI2xvZ291dEhlYWRlclwiKS5vbignbW91c2VlbnRlcicsICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKFwiY29sb3JcIiwgXCIjMDAwXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICQoXCIjbG9nb3V0SGVhZGVyXCIpLm9uKCdtb3VzZWxlYXZlJywgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJjb2xvclwiLCBcIiM0NDRcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgICB9KTtcclxuXHJcblxyXG4gICAgICQoXCIjc2Nyb2xsQmFja1wiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sIDEwMDApO1xyXG4gICAgIH0pO1xyXG5cclxuICAgICAvKiBTY3JvbGxpbmcgdXNpbmcgc2Vzc2lvbiBzdG9yYWdlICovXHJcblxyXG4gICAgIGxldCBzY3JvbGxQb3NpdGlvbiA9ICcnO1xyXG5cclxuICAgICBsZXQgYWRkRGFya1NlbGVjdDtcclxuXHJcbiAgICAgbGV0IGlkc0FyciA9IFtdO1xyXG5cclxuICAgIFxyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICBzY3JvbGxQb3NpdGlvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Njcm9sbFBvc2l0aW9uJyk7XHJcblxyXG4gICAgIGlmIChzY3JvbGxQb3NpdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFBvc2l0aW9uXHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgICB9XHJcbiAgXHJcbiAgICBnZXRVc2VyKCk7IFxyXG4gICAgc3RhcnRUaW1lKCk7XHJcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kSW1nKCk7XHJcbiAgICBnZXRUb2RvcygpO1xyXG5cclxuICAgIGxpbWl0aW5nKCk7XHJcbiAgICBzb3J0aW5nKCk7XHJcbiAgICBkaXNwbGF5aW5nKCk7XHJcblxyXG4gIFxyXG59KTtcclxuXHJcblxyXG4vKiBHRVQgVE9ET1MgKi9cclxuXHJcbmZ1bmN0aW9uIGdldFRvZG9zKCkge1xyXG5cclxuICAgIGxldCBjb29raWUgPSBnZXRDb29raWUoKTtcclxuXHJcbiAgICBsZXQgdG9rZW4gPSBjb29raWVbMF0uc3Vic3RyKDksOTk5KS50b1N0cmluZygpO1xyXG4gICAgdG9rZW4gPSB0b2tlbi50cmltKCk7XHJcblxyXG4kLmFqYXgoe1xyXG4gdHlwZTogXCJHRVRcIixcclxuIHVybDogXCIvdG9kb3NcIixcclxuIGhlYWRlcnM6IHtcclxuICAgICAneC1hdXRoJzogdG9rZW5cclxuIH0sXHJcbiBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgaWYgKGRhdGEudG9kb3MubGVuZ3RoID09IDApIHtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwic2Nyb2xsUG9zaXRpb25cIik7XHJcbiAgICAgICAgJChcIi5ub3RZZXRcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgJChcIiNpbnB1dFRpdGxlXCIpLmF0dHIoXCJwbGFjZWhvbGRlclwiLCBcIlN1Ym1pdCB5b3VyIGZpcnN0IHRvZG9cIik7XHJcbiAgICAgICAgY2hhbmdlUXVvdGUoMCwgMCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgbGV0IGNvbXBsZXRlZFRvZG9zID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnRvZG9zLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS50b2Rvc1tpXS5jb21wbGV0ZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkVG9kb3MrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAkKFwiLm5vdFlldFwiKS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICQoXCIjaW5wdXRUaXRsZVwiKS5hdHRyKFwicGxhY2Vob2xkZXJcIiwgXCJcIik7XHJcbiAgICAgICAgICBjaGFuZ2VRdW90ZSgxLCAoZGF0YS50b2Rvcy5sZW5ndGggLSBjb21wbGV0ZWRUb2RvcykpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG52YXIgbGlzdCA9ICcnO1xyXG52YXIgaWQgPSAnJztcclxudmFyIHRleHQgPSAnJztcclxudmFyIGRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG5mb3IgKHZhciBpID0gMDsgaSA8IGRhdGEudG9kb3MubGVuZ3RoOyBpKyspIHtcclxuXHJcbmlkID0gZGF0YS50b2Rvc1tpXS5faWQudG9TdHJpbmcoKTtcclxudGV4dCA9IGRhdGEudG9kb3NbaV0udGV4dC50b1N0cmluZygpO1xyXG5kZXNjcmlwdGlvbiA9IGRhdGEudG9kb3NbaV0uZGVzY3JpcHRpb247XHJcblxyXG5sZXQgc3RhdHVzID0gJyc7XHJcbmxldCBmaW5pc2hlZCA9ICcnO1xyXG5cclxudmFyIHNob3J0ZW5UaXRsZSA9IGRhdGEudG9kb3NbaV0udGV4dDtcclxuXHJcbmlmIChkYXRhLnRvZG9zW2ldLnRleHQubGVuZ3RoID4gNTApIHtcclxuICAgIHNob3J0ZW5UaXRsZSA9IGRhdGEudG9kb3NbaV0udGV4dC5zdWJzdHIoMCw1MCkgKyBcIi4uLlwiO1xyXG59XHJcblxyXG5pZiAoZGF0YS50b2Rvc1tpXS5jb21wbGV0ZWQpIHtcclxuIHN0YXR1cyA9IFwiQ29tcGxldGVkXCI7XHJcbiBmaW5pc2hlZCA9IFwiQ29tcGxldGVkIEF0OiBcIiArIGRhdGEudG9kb3NbaV0uY29tcGxldGVkQXQuc3Vic3RyKDEyLDgpO1xyXG59XHJcbmVsc2Uge1xyXG4gc3RhdHVzID0gXCJOb3QgY29tcGxldGVkXCI7XHJcbn1cclxuXHJcbmxpc3QgKz0gYDxkaXYgY2xhc3M9XCJjb250YWluZXIgdG9kb0NvbnRhaW5lclwiIG9uY2xpY2s9XCJhZGRJZFRvQXJyYXkoXFxgYCArIGRhdGEudG9kb3NbaV0uX2lkICsgYFxcYClcIj5cclxuICAgIFxyXG4gICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS05XCI+XHJcbjxkaXYgY2xhc3M9XCJyb3dcIj5cclxuPGRpdiBjbGFzcz1cImNvbC1zbS0xMlwiPlxyXG48aDMgY2xhc3M9XCJ0aXRsZVwiPiR7c2hvcnRlblRpdGxlfTwvaDM+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbiA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgIFxyXG4gPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+PHAgY2xhc3M9XCJzdGF0dXNcIj4ke3N0YXR1c308L3A+PC9kaXY+XHJcbiA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj48cCBjbGFzcz1cImZpbmlzaGVkXCI+JHtmaW5pc2hlZH08L3A+IDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1zbS0zXCIgc3R5bGU9XCJoZWlnaHQ6IDEwNXB4O1wiPiBcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNCB0b2RvQnRuQ29sXCI+XHJcbiA8YnV0dG9uIGNsYXNzPVwiYnRuIHRvZG9CdG5cIiB0aXRsZT1cIlVwZGF0ZSBUb2RvXCIgb25jbGljaz1cIm9wZW5Nb2RhbChcXGBgICsgdGV4dCArIGBcXGAsIFxcYGAgKyBkZXNjcmlwdGlvbiArIGBcXGAsICR7ZGF0YS50b2Rvc1tpXS5jb21wbGV0ZWR9LFxcYGAgKyBpZCArIGBcXGAsXFxgYCArIGRhdGEudG9kb3NbaV0uY29tcGxldGVkQXQgKyBgXFxgLCAke2l9LCBcXGBgICsgZGF0YS50b2Rvc1tpXS5jcmVhdGVkQXQgKyBgXFxgKVwiPjxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvYnV0dG9uPlxyXG4gPC9kaXY+XHJcbiA8ZGl2IGNsYXNzPVwiY29sLXNtLTQgdG9kb0J0bkNvbFwiPlxyXG4gXHJcbiA8ZGl2IGNsYXNzPVwib3V0ZXJcIiB0aXRsZT1cIkNvbXBsZXRlIFRvZG9cIiBvbmNsaWNrPSdjb21wbGV0ZVRvZG8oJHtkYXRhLnRvZG9zW2ldLmNvbXBsZXRlZH0sXFxgYCArIGlkICsgYFxcYCwgJHtpfSknPlxyXG4gPGRpdiBjbGFzcz1cInN3aXRjaFwiPjwvZGl2PlxyXG4gPC9kaXY+XHJcbiAgPC9kaXY+ICAgICAgICBcclxuPGRpdiBjbGFzcz1cImNvbC1zbS00IHRvZG9CdG5Db2xcIj5cclxuICAgPGJ1dHRvbiBjbGFzcz1cImJ0biB0b2RvQnRuXCIgdGl0bGU9XCJSZW1vdmUgVG9kb1wiIGlkPVwicmVtb3ZlVG9kb0J0blwiIG9uY2xpY2s9XCJkZWxldGVUb2RvKFxcYGAgKyBpZCArIGBcXGApXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgICAgICAgXHJcbiAgICAgIDwvZGl2PlxyXG4gPC9kaXY+YDtcclxuIFxyXG59XHJcblxyXG4kKFwiI2xpc3RPZlRvZG9zXCIpLmFwcGVuZChsaXN0KTtcclxuXHJcbi8qIG9uY2UgdGV4dCBpcyBhZGRlZCB3ZSBjYW4gdG9nZ2xlIHRoZSBjbGFzcyB3aXRoIGNvdW50ZXIgZnJvbSBhbm90aGVyIGZvciBsb29wICovXHJcbmZvciAodmFyIGkgPSAwOyBpIDwgIGRhdGEudG9kb3MubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICBpZiAoZGF0YS50b2Rvc1tpXS5jb21wbGV0ZWQpIHtcclxuICAgICAgICAkKGAuc3dpdGNoOmVxKCR7aX0pYCkuYWRkQ2xhc3MoXCJtb3ZlXCIpO1xyXG4gICAgICAgICQoYC50aXRsZTplcSgke2l9KWApLmNzcyh7IFwidGV4dC1kZWNvcmF0aW9uXCI6IFwibGluZS10aHJvdWdoXCIgfSk7XHJcblxyXG4gICAgIH1cclxuICAgICBlbHNlIHtcclxuICAgICAgICAgJChgLnN3aXRjaDplcSgke2l9KWApLnJlbW92ZUNsYXNzKFwibW92ZVwiKTtcclxuICAgICB9XHJcbiAgICAgXHJcbn1cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBHRVQgREFSS1NFTEVDVCBDTEFTU1xyXG5cclxuICAgICAgYWRkRGFya1NlbGVjdCA9ICAkKFwiLnRvZG9Db250YWluZXJcIik7XHJcbiAgICAgIFxyXG4gICAgICBhZGREYXJrU2VsZWN0Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImRhcmtTZWxlY3RcIik7XHJcbiAgICAgIH0pXHJcblxyXG5cclxuICAgIC8qIFNjcm9sbCB1c2luZyBzZXNzaW9uIHN0b3JhZ2UgKi8gXHJcblxyXG4gICAgJChcIi5vdXRlciwgLnRvZG9CdG5cIikuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGxldCBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSAgJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Njcm9sbFBvc2l0aW9uJywgY3VycmVudFNjcm9sbFBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gUHJldmVudCBkYXJrU2VsZWN0XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgXHJcbiAgICAgICAgJChcIi50b2RvQ29udGFpbmVyXCIpLnJlbW92ZUNsYXNzKFwiZGFya1NlbGVjdFwiKTtcclxuICAgICAgICBpZHNBcnIgPSBbXTsgXHJcbiAgICAgICBcclxuXHJcbiAgICB9KTtcclxuXHJcbiB9XHJcblxyXG59KTtcclxuXHJcbn1cclxuXHJcblxyXG4vKiBQT1NUIFRPRE8gKi9cclxuIFxyXG5mdW5jdGlvbiBzdWJtaXQoKSB7XHJcblxyXG4gdmFyIHRleHQgPSAkKFwiI2lucHV0VGl0bGVcIikudmFsKCk7XHJcblxyXG4gaWYgKHRleHQgPT0gJycpIHtcclxuICAgICQoXCIjc3VibWl0VG9kb0Vycm9yXCIpLnNob3coKTtcclxuICAgICQoXCIjc3VibWl0VG9kb0Vycm9yXCIpLnRleHQoXCJQbGVhc2UgaW5zZXJ0IHRleHQgdG8gc3VibWl0IHRvZG8uXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gfSBcclxuICBpZiAodGV4dC5sZW5ndGggPiAyMDApIHtcclxuICAgICQoXCIjc3VibWl0VG9kb0Vycm9yXCIpLnNob3coKTtcclxuICAgICQoXCIjc3VibWl0VG9kb0Vycm9yXCIpLnRleHQoXCJQbGVhc2Uga2VlcCB0b2RvIHRpdGxlIG5vIGxvbmdlciB0aGFuIDIwMCBjaGFyYWN0ZXJzLlwiKTtcclxuICAgIHJldHVybjtcclxuIH1cclxuXHJcbnZhciBkYXRhID0ge1xyXG4gXCJ0ZXh0XCI6IHRleHRcclxufVxyXG5cclxuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcInNjcm9sbFBvc2l0aW9uXCIpO1xyXG5cclxuICAgIGxldCBjb29raWUgPSBnZXRDb29raWUoKTtcclxuICAgICAgICBcclxuICAgIGxldCB0b2tlbiA9IGNvb2tpZVswXS5zdWJzdHIoOSw5OTkpLnRvU3RyaW5nKCk7XHJcbiAgICB0b2tlbiA9IHRva2VuLnRyaW0oKTtcclxuXHJcbiQuYWpheCh7XHJcbiB0eXBlOiBcIlBPU1RcIixcclxuIHVybDogXCIvdG9kb3NcIixcclxuIGNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gZGF0YVR5cGUgOiAnanNvbicsXHJcbiBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiBoZWFkZXJzOiB7XHJcbiAgICAneC1hdXRoJyA6IHRva2VuXHJcbiB9LFxyXG4gc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gIGxvY2F0aW9uLnJlbG9hZCgpOyBcclxuIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyU3VibWl0VG9kb0Vycm9yKCkge1xyXG4gICAgJChcIiNzdWJtaXRUb2RvRXJyb3JcIikuaGlkZSgpO1xyXG59XHJcblxyXG5cclxuXHJcbi8qIERFTEVURSBUT0RPICAgKi9cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVRvZG8oaWQpIHtcclxuXHJcbiAgICBsZXQgY29va2llID0gZ2V0Q29va2llKCk7XHJcblxyXG4gICAgbGV0IHRva2VuID0gY29va2llWzBdLnN1YnN0cig5LDk5OSkudG9TdHJpbmcoKTtcclxuICAgIHRva2VuID0gdG9rZW4udHJpbSgpO1xyXG5cclxuICQuYWpheCh7XHJcbiB1cmw6ICcvdG9kb3MvJyArIGlkLFxyXG4gdHlwZTogJ0RFTEVURScsXHJcbiBoZWFkZXJzOiB7XHJcbiAgICBcIngtYXV0aFwiIDogdG9rZW5cclxuIH0sXHJcbiBzdWNjZXNzOiBmdW5jdGlvbigpIHtcclxuIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG4vKiBERUxFVEUgQUxMIFRPRE9TICovXHJcblxyXG5mdW5jdGlvbiBkZWxldGVBbGxUb2RvcygpIHtcclxuXHJcbiBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwic2Nyb2xsUG9zaXRpb25cIik7XHJcblxyXG4gbGV0IGNvb2tpZSA9IGdldENvb2tpZSgpO1xyXG5cclxuIGxldCB0b2tlbiA9IGNvb2tpZVswXS5zdWJzdHIoOSw5OTkpLnRvU3RyaW5nKCk7XHJcbiB0b2tlbiA9IHRva2VuLnRyaW0oKTtcclxuXHJcbiAkLmFqYXgoe1xyXG4gdXJsOiAnL3RvZG9zJyxcclxuIHR5cGU6ICdERUxFVEUnLFxyXG4gaGVhZGVyczoge1xyXG4gICAgIFwieC1hdXRoXCIgOiB0b2tlblxyXG4gfSxcclxuIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xyXG4gfVxyXG5cclxuXHJcbn0pO1xyXG5cclxud2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qIENPTVBMRVRFIFRPRE8gKi9cclxuXHJcbmZ1bmN0aW9uIGNvbXBsZXRlVG9kbyhpc0NvbXBsZXRlZCwgc29tZUlkLCBpKSB7XHJcblxyXG4gICBsZXQgY29tcGxldGVkQXQgPSAnJztcclxuXHJcbiBpZiAoaXNDb21wbGV0ZWQpIHtcclxuICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlO1xyXG4gICAgICQoYC5zd2l0Y2g6ZXEoJHtpfSlgKS5yZW1vdmVDbGFzcyhcIm1vdmVcIik7XHJcbiAgICAgY29tcGxldGVkQXQgPSBudWxsO1xyXG5cclxuIH0gZWxzZSB7XHJcbiAgICAgaXNDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICQoYC5zd2l0Y2g6ZXEoJHtpfSlgKS5hZGRDbGFzcyhcIm1vdmVcIik7XHJcblxyXG4gICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICB2YXIgc3RyID0gZC50b1N0cmluZygpO1xyXG4gICAgIHN0ciA9IHN0ci5zdWJzdHIoNCwyMCk7XHJcbiAgICAgY29tcGxldGVkQXQgPSBzdHI7XHJcblxyXG4gfVxyXG5cclxudmFyIGRhdGEgPSB7XHJcbiBjb21wbGV0ZWQ6IGlzQ29tcGxldGVkLFxyXG4gY29tcGxldGVkQXRcclxufTtcclxuXHJcbmxldCBjb29raWUgPSBnZXRDb29raWUoKTtcclxuXHJcbmxldCB0b2tlbiA9IGNvb2tpZVswXS5zdWJzdHIoOSw5OTkpLnRvU3RyaW5nKCk7XHJcbnRva2VuID0gdG9rZW4udHJpbSgpO1xyXG5cclxuXHJcbiQuYWpheCh7XHJcbnVybDogXCIvdG9kb3MvXCIgKyBzb21lSWQsXHJcbmRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG50eXBlOiAnUEFUQ0gnLFxyXG5jb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5wcm9jZXNzRGF0YTogZmFsc2UsXHJcbmRhdGFUeXBlOiAnanNvbicsXHJcbmhlYWRlcnM6IHtcclxuICAgICd4LWF1dGgnIDogdG9rZW5cclxufSxcclxuc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxubG9jYXRpb24ucmVsb2FkKCk7XHJcbn1cclxuXHJcblxyXG59KTtcclxuXHJcbn1cclxuXHJcblxyXG4vKiBVUERBVEUgT05FIFRPRE8gKi9cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVRvZG8odGV4dCwgZGVzY3JpcHRpb24sIGNvbXBsZXRlZCwgaWQsIHJlZnJlc2gsIGtlZXBUaGVEYXRlKSB7XHJcblxyXG4gICAgdmFyIGVycm9yQ291bnRlciA9IDA7XHJcblxyXG4gICAgdGV4dCA9ICQoXCIjdG9kb1RpdGxlSW5Nb2RhbFwiKS52YWwoKTtcclxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1wiL2csIFwiJ1wiKTsgXHJcbiAgICB0ZXh0ID0gdGV4dC50cmltKCk7IFxyXG5cclxuICAgIGRlc2NyaXB0aW9uID0gJChcInRleHRhcmVhXCIpLnZhbCgpO1xyXG4gICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlKC9cIi9nLCBcIidcIik7IFxyXG4gICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi50cmltKCk7IFxyXG5cclxuXHJcbiAgICBpZiAodGV4dCA9PSAnJykge1xyXG4gICAgICAgICQoXCIjdG9kb1RpdGxlSW5Nb2RhbEVycm9yXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICAkKFwiI3RvZG9UaXRsZUluTW9kYWxFcnJvclwiKS50ZXh0KFwiVGl0bGUgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXJcIik7XHJcbiAgICAgICAgZXJyb3JDb3VudGVyKys7XHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiAyMDApIHtcclxuICAgICAgICAkKFwiI3RvZG9UaXRsZUluTW9kYWxFcnJvclwiKS5zaG93KCk7XHJcbiAgICAgICAgJChcIiN0b2RvVGl0bGVJbk1vZGFsRXJyb3JcIikudGV4dChcIkV4Y2VlZGVkIG1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgKDIwMClcIik7XHJcbiAgICAgICAgZXJyb3JDb3VudGVyKys7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uLmxlbmd0aCA+IDIwMDApIHtcclxuICAgICAgICAkKFwiI3RleHRhcmVhRXJyb3JcIikuc2hvdygpO1xyXG4gICAgICAgICQoXCIjdGV4dGFyZWFFcnJvclwiKS50ZXh0KFwiRXhjZWVkZWQgbWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyAoMjAwMClcIik7XHJcbiAgICAgICAgZXJyb3JDb3VudGVyKys7XHJcbiAgICB9XHJcblxyXG52YXIgZGF0YSA9IHtcclxuICAgIHRleHQsXHJcbiAgICBkZXNjcmlwdGlvbixcclxuICAgIGNvbXBsZXRlZCxcclxuICAgIGNvbXBsZXRlZEF0OiBrZWVwVGhlRGF0ZVxyXG59O1xyXG5cclxubGV0IGNvb2tpZSA9IGdldENvb2tpZSgpO1xyXG5cclxubGV0IHRva2VuID0gY29va2llWzBdLnN1YnN0cig5LDk5OSkudG9TdHJpbmcoKTtcclxudG9rZW4gPSB0b2tlbi50cmltKCk7XHJcblxyXG5pZiAocmVmcmVzaCAmJiBlcnJvckNvdW50ZXIgPT0gMCkge1xyXG5cclxuJC5hamF4KHtcclxudXJsOiBcIi90b2Rvcy9cIiArIGlkLFxyXG5kYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxudHlwZTogJ1BBVENIJyxcclxuY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxucHJvY2Vzc0RhdGE6IGZhbHNlLFxyXG5kYXRhVHlwZTogJ2pzb24nLFxyXG5oZWFkZXJzOiB7XHJcbiAgICAneC1hdXRoJyA6IHRva2VuXHJcbn0sXHJcbnN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4kKFwiI215TW9kYWxcIikuZmFkZU91dCgpO1xyXG5sb2NhdGlvbi5yZWxvYWQoKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG52YXIgZGF0YSA9IHt9O1xyXG5cclxudmFyIGtlZXBUaGVEYXRlID0gbnVsbDtcclxudmFyIG5ld0RhdGUgPSAnJztcclxuXHJcbmZ1bmN0aW9uIGNvbWJpbmVWYWx1ZXModGV4dCwgZGVzY3JpcHRpb24sIGlzQ29tcGxldGVkLCBpZCwgcmVmcmVzaCwgbW9kYWxGaW5pc2hlZCwgY29tcGxldGVkQXQpIHsgXHJcblxyXG4gICBcclxuICAgICBpZiAodHlwZW9mKG1vZGFsRmluaXNoZWQpICE9ICdzdHJpbmcnICYmIGtlZXBUaGVEYXRlICE9IG51bGwpIHtcclxuICAgICAgICBrZWVwVGhlRGF0ZSA9IGtlZXBUaGVEYXRlO1xyXG4gICAgICAgIFxyXG4gICAgIH1cclxuICAgICAgICAgZWxzZSAgaWYgKHR5cGVvZihtb2RhbEZpbmlzaGVkKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAga2VlcFRoZURhdGUgPT0gbW9kYWxGaW5pc2hlZDtcclxuICAgICAgICAgXHJcbiAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgIGtlZXBUaGVEYXRlID0gY29tcGxldGVkQXQ7XHJcbiAgICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YodGV4dCkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgZGF0YS50ZXh0ID0gdGV4dDtcclxuXHJcbiAgICAgICAgaWYgKCAgJChcIi5zd2l0Y2hNb2RhbFwiKS5oYXNDbGFzcyhcIm1vdmVNb2RhbFwiKSApIHtcclxuICAgICAgICAgICAgZGF0YS5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBrZWVwVGhlRGF0ZSA9IGtlZXBUaGVEYXRlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhLmNvbXBsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBrZWVwVGhlRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgIFxyXG4gICAgICAgIHJlZnJlc2ggPSB0cnVlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mKHRleHQpID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgZGF0YS5jb21wbGV0ZWQgPSBpc0NvbXBsZXRlZDtcclxuICAgICAgICByZWZyZXNoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChpc0NvbXBsZXRlZCkge1xyXG4gICAgICAgICAgICBrZWVwVGhlRGF0ZSA9IG1vZGFsRmluaXNoZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAga2VlcFRoZURhdGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgdXBkYXRlVG9kbyhkYXRhLnRleHQsIGRlc2NyaXB0aW9uLCBkYXRhLmNvbXBsZXRlZCwgaWQsIHJlZnJlc2gsIGtlZXBUaGVEYXRlKTtcclxuXHJcbn1cclxuXHJcbiAgXHJcbnZhciBtb2RhbFN0YXR1cyA9IFwiXCI7XHJcbnZhciBtb2RhbEZpbmlzaGVkID0gJyc7XHJcbnZhciB0b2dnbGVDb3VudGVyID0gMDtcclxudmFyIHRvZ2dsZVZhbHVlID0gW107XHJcblxyXG5mdW5jdGlvbiBjb21wbGV0ZUluTW9kYWwodGV4dCwgZGVzY3JpcHRpb24sIGlzQ29tcGxldGVkLCBpZCwgcmVmcmVzaCwgY29tcGxldGVkQXQsIGkpIHtcclxuXHJcbiAgICBpZiAodG9nZ2xlQ291bnRlciA9PSAwKSB7XHJcbiAgICAgICAgdG9nZ2xlVmFsdWVbaV0gPSAhaXNDb21wbGV0ZWQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdG9nZ2xlVmFsdWVbaV0gPSAhdG9nZ2xlVmFsdWVbaV07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICAgdmFyIHN0ciA9IGQudG9TdHJpbmcoKTtcclxuICAgICAgc3RyID0gc3RyLnN1YnN0cig0LDIwKTtcclxuICAgICAgbW9kYWxGaW5pc2hlZCA9IHN0cjtcclxuXHJcbiAgICAgIGlmICh0b2dnbGVWYWx1ZVtpXSkge1xyXG4gICAgICAgICQoXCIuc3dpdGNoTW9kYWxcIikuYWRkQ2xhc3MoXCJtb3ZlTW9kYWxcIik7XHJcbiAgICAgICAgbW9kYWxTdGF0dXMgPSBcIkNvbXBsZXRlZFwiO1xyXG4gICAgICAgICQoXCIjbW9kYWxGaW5pc2hlZFwiKS50ZXh0KG1vZGFsRmluaXNoZWQpO1xyXG4gIFxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIG1vZGFsU3RhdHVzID0gXCJOb3QgQ29tcGxldGVkXCI7XHJcbiAgICAgICAgJChcIi5zd2l0Y2hNb2RhbFwiKS5yZW1vdmVDbGFzcyhcIm1vdmVNb2RhbFwiKTtcclxuICAgICAgICAkKFwiI21vZGFsRmluaXNoZWRcIikuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1xdWVzdGlvbi1jaXJjbGVcIiBzdHlsZT1cImZvbnQtc2l6ZToyNHB4XCI+PC9pPicpO1xyXG4gICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgJChcIiNtb2RhbFN0YXR1c1wiKS50ZXh0KG1vZGFsU3RhdHVzKTtcclxuXHJcbiAgICAgIFxyXG4gICAgIHRvZ2dsZUNvdW50ZXIrKztcclxuXHJcbiAgICAgY29tYmluZVZhbHVlcyh0ZXh0LCBkZXNjcmlwdGlvbiwgdG9nZ2xlVmFsdWVbaV0sIGlkLCByZWZyZXNoLCBtb2RhbEZpbmlzaGVkLCBjb21wbGV0ZWRBdCk7XHJcblxyXG59XHJcblxyXG5cclxuLyogTW9kYWwgKi9cclxuXHJcbi8vIE9wZW4gTW9kYWxcclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbCh0ZXh0LCBkZXNjcmlwdGlvbiwgaXNDb21wbGV0ZWQsIGlkLCBjb21wbGV0ZWRBdCwgaSwgY3JlYXRlZEF0KSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgXHJcbiAgICBtb2RhbEZpbmlzaGVkID0gY29tcGxldGVkQXQ7XHJcblxyXG4gICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgbW9kYWxTdGF0dXMgPSBcIkNvbXBsZXRlZFwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbW9kYWxTdGF0dXMgPSBcIk5vdCBDb21wbGV0ZWRcIjsgXHJcbiAgICB9XHJcblxyXG5cclxuLy8gTW9kYWwgaGVhZGVyXHJcblxyXG52YXIgbWggPSBgXHJcbjxwIGNsYXNzPVwiY2xvc2VNb2RhbFwiIG9uY2xpY2s9XCJjbG9zZU1vZGFsKDQ3LCAke2lzQ29tcGxldGVkfSxcXGBgICsgaWQgKyBgXFxgLCBmYWxzZSlcIj4mdGltZXM8L3A+XHJcbiAgICAgICAgICBcclxuPGgzIGNsYXNzPVwibW9kYWxUaXRsZVwiIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyO1xyXG5kaXNwbGF5OiBibG9jaztcclxubWFyZ2luOiAwIGF1dG87XHJcbndpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4O1wiPlVwZGF0ZSBUb2RvPC9oMz5cclxuYDtcclxuXHJcbiQoXCIubW9kYWwtaGVhZGVyXCIpLmh0bWwobWgpO1xyXG5cclxuXHJcbi8vIE1vZGFsIEJvZHkgLS0gTkFNRVxyXG5cclxubWIgPSBgPGRpdiBjbGFzcz1cIm1vZGFsUGF1c2VcIj4gIFxyXG48aDUgY2xhc3M9XCJwYXVzZURlc2NcIj5OQU1FPC9oNT5cclxuPGRpdiBjbGFzcz1cImNvbnRhaW5lciBiZy0zIHRleHQtY2VudGVyXCIgc3R5bGU9XCJ3aWR0aDogNzY4cHg7XCI+XHJcbjxkaXYgY2xhc3M9XCJyb3dcIj5cclxuPGRpdiBjbGFzcz1cImNvbC1zbS0zXCI+IDwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cclxuPGlucHV0IGlkPVwidG9kb1RpdGxlSW5Nb2RhbFwiIG9uaW5wdXQ9XCJvbmlucHV0VG9kb1RpdGxlSW5Nb2RhbCgpXCIgYXV0b2ZvY3VzIHN0eWxlPVwid2lkdGg6IDEwMCU7IGJhY2tncm91bmQ6ICNGRkY7IGJvcmRlcjogMnB4IHNvbGlkICNDQ0M7IGNvbG9yOiAjMDAwOyBtYXJnaW4tdG9wOiA0cHg7XCIgLz5cclxuPHAgaWQ9XCJ0b2RvVGl0bGVJbk1vZGFsRXJyb3JcIj48L3A+XHJcbiAgICA8L2Rpdj5cclxuICAgXHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPiA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuPC9kaXY+ICBcclxuIDwvZGl2PiAgYDtcclxuXHJcblxyXG4vLyBNb2RhbCBCb2R5IC0tIERFU0NSSVBUSU9OXHJcblxyXG5tYiArPSBgPGRpdiBjbGFzcz1cIm1vZGFsUGF1c2VcIj4gIFxyXG48aDUgY2xhc3M9XCJwYXVzZURlc2NcIj5ERVNDUklQVElPTjwvaDU+XHJcbjxkaXYgY2xhc3M9XCJjb250YWluZXIgYmctMyB0ZXh0LWNlbnRlclwiIHN0eWxlPVwid2lkdGg6IDc2OHB4O1wiPlxyXG48ZGl2IGNsYXNzPVwicm93XCI+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPiA8L2Rpdj5cclxuPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XHJcbjx0ZXh0YXJlYSBpZD1cInRleHRhcmVhXCIgcGxhY2Vob2xkZXI9XCJPcHRpb25hbFwiIG9uaW5wdXQ9XCJvbmlucHV0VGV4dGFyZWEoKVwiIHJvd3M9NSBzdHlsZT1cIndpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiAjRkZGOyBib3JkZXI6IDJweCBzb2xpZCAjQ0NDOyBjb2xvcjogIzAwMDsgbWFyZ2luLXRvcDogNHB4OyByZXNpemU6IG5vbmU7XCI+PC90ZXh0YXJlYT5cclxuPHAgaWQ9XCJ0ZXh0YXJlYUVycm9yXCI+PC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgIFxyXG48ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj4gPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbjwvZGl2PiAgXHJcbiA8L2Rpdj4gIGA7XHJcblxyXG4gLy8gQm9keSBwYXJ0IDJcclxuXHJcbiBtYis9IGAgXHJcbiA8ZGl2IGNsYXNzPVwibW9kYWxQYXVzZVwiPiAgXHJcbjxoNSBjbGFzcz1cInBhdXNlRGVzY1wiPkRFVEFJTFM8L2g1PlxyXG48ZGl2IGNsYXNzPVwiY29udGFpbmVyIGJnLTMgdGV4dC1jZW50ZXJcIiBzdHlsZT1cIndpZHRoOiA3NjhweDsgaGVpZ2h0OiA4NXB4OyBwYWRkaW5nLWJvdHRvbTogMHB4OyBtYXJnaW4tdG9wOiAxMHB4O1wiPlxyXG48ZGl2IGNsYXNzPVwicm93XCI+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiY29sLXNtLTJcIj5cclxuPHA+U3RhdHVzOjwvcD5cclxuPC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tMlwiPlxyXG48cCBpZD1cIm1vZGFsU3RhdHVzXCI+JHttb2RhbFN0YXR1c308L3A+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiY29sLXNtLTJcIj5cclxuPGRpdiBjbGFzcz1cIm91dGVyTW9kYWxcIiB0aXRsZT1cIkNvbXBsZXRlIFRvZG9cIiBpZD1cInRvZ2dsZUJ0blwiIG9uY2xpY2s9XCJjb21wbGV0ZUluTW9kYWwoNDcsIFxcYGAgKyBkZXNjcmlwdGlvbiArIGBcXGAgLCAke2lzQ29tcGxldGVkfSxcXGBgICsgaWQgKyBgXFxgLCAnbm9SZWZyZXNoJywgXFxgYCArIGNvbXBsZXRlZEF0ICsgYFxcYCwgJHtpfSlcIiBzdHlsZT1cIm1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXJcIj5cclxuPGRpdiBjbGFzcz1cInN3aXRjaE1vZGFsXCI+PC9kaXY+XHJcbjwvZGl2PlxyXG4gICAgXHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwicm93XCIgc3R5bGU9XCJwYWRkaW5nLXRvcDogMTVweDtcIj5cclxuPGRpdiBjbGFzcz1cImNvbC1zbS0zXCI+PC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tMlwiPlxyXG48cCBpZD1cImNvbXBsZXRlQXRQYXJcIj5DcmVhdGVkICAgQ29tcGxldGVkOjwvcD5cclxuPC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tMlwiPlxyXG48cCBjbGFzcz1cIm1vZGFsRGV0YWlsc1wiPiR7Y3JlYXRlZEF0fTwvcD5cclxuPC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJjb2wtc20tMlwiPlxyXG48cCBjbGFzcz1cIm1vZGFsRGV0YWlsc1wiIGlkPVwibW9kYWxGaW5pc2hlZFwiPiR7bW9kYWxGaW5pc2hlZH08L3A+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcblxyXG5cclxuJChcIi5tb2RhbC1ib2R5XCIpLmh0bWwobWIpO1xyXG5cclxuaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICBtb2RhbFN0YXR1cyA9IFwiQ29tcGxldGVkXCI7XHJcbiAgICAkKFwiLnN3aXRjaE1vZGFsXCIpLmFkZENsYXNzKFwibW92ZU1vZGFsXCIpO1xyXG4gICAgJChcIiNtb2RhbEZpbmlzaGVkXCIpLnRleHQobW9kYWxGaW5pc2hlZClcclxufSBlbHNlIHtcclxuICAgIG1vZGFsU3RhdHVzID0gXCJOb3QgQ29tcGxldGVkXCI7XHJcbiAgICAkKFwiLnN3aXRjaE1vZGFsXCIpLnJlbW92ZUNsYXNzKFwibW92ZU1vZGFsXCIpO1xyXG4gICAgJChcIiNtb2RhbEZpbmlzaGVkXCIpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtcXVlc3Rpb24tY2lyY2xlXCIgc3R5bGU9XCJmb250LXNpemU6MjRweFwiPjwvaT4nKTtcclxufVxyXG5cclxuXHJcbi8vIG1vZGFsIGZvb3RlclxyXG5cclxudmFyIG1mID0gYDxidXR0b24gaWQ9XCJjYW5jZWxCdG5cIiBjbGFzcz1cIm1vZGFsQnRuc1wiIG9uY2xpY2s9XCJjbG9zZU1vZGFsKDQ3LCAke2lzQ29tcGxldGVkfSxcXGBgICsgaWQgKyBgXFxgLCBmYWxzZSlcIj5DYW5jZWw8L2J1dHRvbj5cclxuPGJ1dHRvbiBpZD1cInVwZGF0ZUJ0blwiIGNsYXNzPVwibW9kYWxCdG5zXCIgb25jbGljaz1cImNvbWJpbmVWYWx1ZXMoXFxgYCArIHRleHQgKyBgXFxgLCBcXGBgICsgZGVzY3JpcHRpb24gKyBgXFxgLCR7aXNDb21wbGV0ZWR9LFxcYGAgKyBpZCArIGBcXGAsIHRydWUsIDQsXFxgYCArIGNvbXBsZXRlZEF0ICsgYFxcYClcIj5VcGRhdGU8L2J1dHRvbj5gOyBcclxuXHJcbiAgICAkKFwiLm1vZGFsLWZvb3RlclwiKS5odG1sKG1mKTtcclxuXHJcbiAgICB2YXIgdGV4dFZhbHVlID0gdGV4dDsgXHJcblxyXG4gICAgJChcInRleHRhcmVhXCIpLnRleHQoZGVzY3JpcHRpb24pO1xyXG4gICAgJChcIiN0b2RvVGl0bGVJbk1vZGFsXCIpLnZhbCh0ZXh0VmFsdWUpO1xyXG5cclxuICAgfVxyXG5cclxuICAgLy8gQ2xvc2UgTW9kYWxcclxuXHJcbiAgIHZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1vZGFsJyk7XHJcbiAgXHJcbiAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwodGV4dCwgaXNDb21wbGV0ZWQsIGlkLCByZWZyZXNoKSB7XHJcbiAgICAgICB0b2dnbGVDb3VudGVyID0gMDtcclxuICAgICQoXCIjbXlNb2RhbFwiKS5mYWRlT3V0KCk7XHJcbiAgXHJcbiAgICBjb21iaW5lVmFsdWVzKHRleHQsIGlzQ29tcGxldGVkLCBpZCwgcmVmcmVzaCk7IFxyXG4gICB9XHJcblxyXG4gICBcclxuICAgLy8gb25pbnB1dCB0ZXh0YXJlYVxyXG5cclxuICAgZnVuY3Rpb24gb25pbnB1dFRleHRhcmVhKCkge1xyXG5cclxuICAgICQoXCIjdGV4dGFyZWFFcnJvclwiKS5oaWRlKCk7XHJcblxyXG4gICB9XHJcblxyXG4gICBmdW5jdGlvbiBvbmlucHV0VG9kb1RpdGxlSW5Nb2RhbCgpIHtcclxuXHJcbiAgICAkKFwiI3RvZG9UaXRsZUluTW9kYWxFcnJvclwiKS5oaWRlKCk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgLyogU3RhcnQgUGFnZSBTY3JpcHQgKi8gXHJcblxyXG4gICBmdW5jdGlvbiBzdGFydFRpbWUoKSB7XHJcbiAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGggPSB0b2RheS5nZXRIb3VycygpO1xyXG4gICAgdmFyIG0gPSB0b2RheS5nZXRNaW51dGVzKCk7XHJcbiAgICB2YXIgcyA9IHRvZGF5LmdldFNlY29uZHMoKTtcclxuICAgIG0gPSBjaGVja1RpbWUobSk7XHJcbiAgICBzID0gY2hlY2tUaW1lKHMpO1xyXG5cclxuICAgIGlmIChoIDwgMTApIHtcclxuICAgICAgICBoID0gXCIwXCIgKyBoO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkKFwiI2Nsb2NrVGl0bGVcIikuaHRtbChoICsgXCI6XCIgKyBtICsgXCI6XCIgKyBzKTtcclxuXHJcbiAgICB2YXIgdCA9IHNldFRpbWVvdXQoc3RhcnRUaW1lLCA1MDApO1xyXG59XHJcbmZ1bmN0aW9uIGNoZWNrVGltZShpKSB7XHJcbiAgICBpZiAoaSA8IDEwKSB7aSA9IFwiMFwiICsgaX07IFxyXG4gICAgcmV0dXJuIGk7XHJcbn1cclxuXHJcbmNvbnN0IHF1b3Rlc0FycmF5ID0gW1xyXG4gICAgYOKAnEEgam91cm5leSBvZiBhIHRob3VzYW5kIG1pbGVzIGJlZ2lucyB3aXRoIGEgc2luZ2xlIHN0ZXAu4oCdXHJcbiAgICDigJMgTGFvIFR6dWAsXHJcbiAgICBg4oCcVGhlIG9ubHkgaW1wb3NzaWJsZSBqb3VybmV5IGlzIHRoZSBvbmUgeW91IG5ldmVyIGJlZ2luLuKAnVxyXG4gICAg4oCTIFRvbnkgUm9iYmluc2AsXHJcblxyXG4gICAgYOKAnFdlIGFyZSB3aGF0IHdlIHJlcGVhdGVkbHkgZG8uIEV4Y2VsbGVuY2UsIHRoZW4sIGlzIG5vdCBhbiBhY3QgYnV0IGEgaGFiaXQu4oCdXHJcbiAgICDigJMgQXJpc3RvdGxlYCxcclxuICAgIGDigJxEb27igJl0IGp1ZGdlIGVhY2ggZGF5IGJ5IHRoZSBoYXJ2ZXN0IHlvdSByZWFwLCBidXQgYnkgdGhlIHNlZWRzIHRoYXQgeW91IHBsYW50LuKAnVxyXG4gICAg4oCTIFJvYmVydCBMb3VpcyBTdGV2ZW5zb25gLFxyXG5cclxuICAgIGDigJxXcml0aW5nIGlzIGFuIGV4cGxvcmF0aW9uLiBZb3Ugc3RhcnQgZnJvbSBub3RoaW5nIGFuZCBsZWFybiBhcyB5b3UgZ28u4oCdXHJcbiAgICDigJMgRS4gTC4gRG9jdG9yb3dgLFxyXG4gICAgYOKAnEFkYXB0IHdoYXQgaXMgdXNlZnVsLCByZWplY3Qgd2hhdCBpcyB1c2VsZXNzLCBhbmQgYWRkIHdoYXQgaXMgc3BlY2lmaWNhbGx5IHlvdXIgb3duLuKAnVxyXG4gICAg4oCTIEJydWNlIExlZWAsXHJcblxyXG4gICAgYOKAnFN0YXJ0IHdoZXJlIHlvdSBhcmUuIFVzZSB3aGF0IHlvdSBoYXZlLiBEbyB3aGF0IHlvdSBjYW4u4oCdIFxyXG4gICAg4oCTIEFydGh1ciBBc2hlYCxcclxuICAgIGDigJxHb29kLCBiZXR0ZXIsIGJlc3QuIE5ldmVyIGxldCBpdCByZXN0LiAnVGlsIHlvdXIgZ29vZCBpcyBiZXR0ZXIgYW5kIHlvdXIgYmV0dGVyIGlzIGJlc3Qu4oCdIFxyXG4gICAg4oCTIFN0LiBKZXJvbWVgLFxyXG5cclxuICAgIGDigJxJZiB5b3UgY2FuIGRyZWFtIGl0LCB5b3UgY2FuIGRvIGl0LuKAnSBcclxuICAgIOKAkyBXYWx0IERpc25leWAsXHJcbiAgICBg4oCcU2V0dGluZyBnb2FscyBpcyB0aGUgZmlyc3Qgc3RlcCBpbiB0dXJuaW5nIHRoZSBpbnZpc2libGUgaW50byB0aGUgdmlzaWJsZS7igJ0gXHJcbiAgICDigJMgVG9ueSBSb2JiaW5zYCxcclxuXHJcbiAgICBg4oCcQSBjcmVhdGl2ZSBtYW4gaXMgbW90aXZhdGVkIGJ5IHRoZSBkZXNpcmUgdG8gYWNoaWV2ZSwgbm90IGJ5IHRoZSBkZXNpcmUgdG8gYmVhdCBvdGhlcnMu4oCdIFxyXG4gICAg4oCTIEF5biBSYW5kYCxcclxuICAgIGDigJxIZSB3aG8gZG9lcyBub3QgbGl2ZSBpbiB0aGUgd2F5IG9mIGhpcyBiZWxpZWZzIHN0YXJ0cyB0byBiZWxpZXZlIGluIHRoZSB3YXkgaGUgbGl2ZXMu4oCdXHJcbiAgICDigJMgVW1hciBpYm4gQWwtS2hhdHRhYmAsXHJcbl07XHJcblxyXG5cclxuY29uc3QgcXVlc3Rpb25zQXJyYXkgPSBbXHJcblwiV2hhdCdzIG5leHQgb24geW91ciBtaW5kP1wiLFxyXG5cIldoYXQncyB5b3VyIHBsYW4gZm9yIHRvZGF5P1wiLFxyXG5cIldoYXQgZG8geW91IHdhbnQgdG8gZG8gbmV4dD9cIixcclxuXCJXaGF0IGlzIHlvdXIgbWFpbiBmb2N1cyB0b2RheT9cIixcclxuXCJXaGF0J3MgbmV4dCBvbiB5b3VyIGxpc3Q/XCJcclxuXTtcclxuXHJcblxyXG5jb25zdCBhcnJheU9mQmFja2dyb3VuZHMgPSBbXHJcblxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2Nsb3Vkc2NpdHkuanBlZ1wiLCAvLyBqdXN0IGluIGNhc2UgZGF0ZSBnZXRzIHRvIDAgc29tZWRheSA6fFxyXG4gICAgXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvYXBwbGUuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2JlYWNoYW5hbmFzLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9iZWFjaGNpdHkuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2Jpa2UuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2J1bGIuanBlZ1wiLFxyXG4gICAgXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvYm9hdC5qcGdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9ib3R0bGUuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2NoZXJyaWVzLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9jaGVzcy5qcGVnXCIsXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvY2xvdWRzLmpwZWdcIixcclxuICAgIFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2ZlcnJhcmkuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2ZvcmVzdHJvYWQuanBnXCIsXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvZ2xhc3Nlcy5qcGVnXCIsXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvZ3VpdGFyLmpwZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL2hlYWRwaG9uZXMuanBlZ1wiLFxyXG5cclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9oaWdod2F5LmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9ob21lLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9qZXRlbmdpbmUuanBnXCIsXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIva2l0dGVuLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9sb2dzLmpwZWdcIixcclxuXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvbWF0Y2guanBnXCIsXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvcGFya2VkaW53aWxkLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9yb2FkLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9yb3BlLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci9zYW5kYWxzLmpwZWdcIixcclxuXHJcbiAgICBcIi4uL1Jlc291cmNlcy9pbWcvY292ZXIvc2Vhcm9ja3MuanBlZ1wiLFxyXG4gICAgXCIuLi9SZXNvdXJjZXMvaW1nL2NvdmVyL3NreW5pZ2h0LmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci90aHVuZGVyLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci91bmRlcndhdGVyLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci93aW5nLmpwZWdcIixcclxuICAgIFwiLi4vUmVzb3VyY2VzL2ltZy9jb3Zlci93b2x2ZXMuanBlZ1wiXHJcbl07XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VRdW90ZShudW0sIHRvZG9zKSB7XHJcblxyXG4gICAgbGV0IHJhbmRvbVF1b3RlID0gJyc7XHJcblxyXG4gICAgaWYgKG51bSA9PSAwKSB7XHJcbiAgICAgICAgJChcIiNxdWVzdGlvbnNUaXRsZVwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAkKFwiI3F1b3RlVGl0bGVcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgICAgICByYW5kb21RdW90ZSA9IHF1b3Rlc0FycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHF1b3Rlc0FycmF5Lmxlbmd0aCldO1xyXG4gICAgICAgICQoXCIjcXVvdGVUaXRsZVwiKS50ZXh0KHJhbmRvbVF1b3RlKTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIGlmICh0b2RvcyA9PSAwKSB7XHJcbiAgICAgICAgJChcIiNxdW90ZVRpdGxlXCIpLnRleHQoYFlvdSBoYXZlIG5vIHVuZmluaXNoZWQgdG9kb3NgKTsgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICh0b2RvcyA9PSAxKSB7XHJcbiAgICAgICAgJChcIiNxdW90ZVRpdGxlXCIpLnRleHQoYFlvdSBoYXZlICR7dG9kb3N9IHVuZmluaXNoZWQgdG9kbyBiZWxvd2ApOyAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjcXVvdGVUaXRsZVwiKS50ZXh0KGBZb3UgaGF2ZSAke3RvZG9zfSB1bmZpbmlzaGVkIHRvZG9zIGJlbG93YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI3F1ZXN0aW9uc1RpdGxlXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICByYW5kb21RdW90ZSA9IHF1ZXN0aW9uc0FycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHF1ZXN0aW9uc0FycmF5Lmxlbmd0aCldO1xyXG4gICAgICAgICQoXCIjcXVlc3Rpb25zVGl0bGVcIikudGV4dChyYW5kb21RdW90ZSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VCYWNrZ3JvdW5kSW1nKCkge1xyXG5cclxuICAgIC8vIGxldCByYW5kSW1nID0gYXJyYXlPZkJhY2tncm91bmRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5T2ZCYWNrZ3JvdW5kcy5sZW5ndGgpXTtcclxuXHJcbiAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcclxuXHJcbiAgICAkKCcjb3BlbmluZ0RpdicpLmZhZGVUbyg1MDAsIDAuNSwgZnVuY3Rpb24oKSAgIHtcclxuICAgXHJcbiAgICAgICAgJCh0aGlzKS5jc3Moe1xyXG4gICAgICAgICAgICBcImJhY2tncm91bmRcIjogYHVybCgnJHthcnJheU9mQmFja2dyb3VuZHNbdG9kYXldfScpYCxcclxuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWF0dGFjaG1lbnRcIjogXCJmaXhlZFwiLFxyXG4gICAgICAgICAgICBcIm92ZXJmbG93XCI6IFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1wb3NpdGlvblwiOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICBcImJhY2tncm91bmQtcmVwZWF0XCI6IFwibm8tcmVwZWF0XCIsXHJcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1zaXplXCI6IFwiY292ZXJcIixcclxuICAgICAgICAgICAgXCItd2Via2l0LWJhY2tncm91bmQtc2l6ZVwiOiBcImNvdmVyXCIsXHJcbiAgICAgICAgICAgIFwiLW1vei1iYWNrZ3JvdW5kLXNpemVcIjogXCJjb3ZlclwiLFxyXG4gICAgICAgICAgICBcIi1vLWJhY2tncm91bmQtc2l6ZVwiOiBcImNvdmVyXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KS5mYWRlVG8oNTAwLCAxKTtcclxuXHJcbn1cclxuXHJcblxyXG4vKiBTY3JvbGxpbmcgQXJvdW5kICovIFxyXG5cclxuJChcIiNzY3JvbGxEb3duXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogJChcIiNjb250YWluZXJCZ1wiKS5vZmZzZXQoKS50b3BcclxuICAgIH0sIDEwMDApO1xyXG59KTtcclxuXHJcblxyXG4vKiBOYXZiYXIgTGkgSW5uZXIgVWwgbGlzdHMgKi8gXHJcblxyXG5cclxuZnVuY3Rpb24gbGltaXRpbmcoKSB7XHJcbiAgXHJcbiAgICBjb25zdCBsaW1pdEFycmF5ID0gW1wiTm8gbGltaXRcIiwgMSwgMywgNSwgMTAsIDE1LCAyMF07XHJcbiAgXHJcbiAgICAgIGxldCBhZGRMaW1pdCA9ICcnO1xyXG4gICAgICBsaW1pdEFycmF5LmZvckVhY2goKGxpbSwgaSkgPT4ge1xyXG4gICAgICAgIGFkZExpbWl0ICs9IGBcclxuICAgICAgPGxhYmVsIGNsYXNzPVwicmFkaW9cIj5cclxuICAgICAgPGlucHV0IGNsYXNzPVwibGltaXRSYWRpb1wiICBuYW1lPVwibGltaXRcIiB0eXBlPVwicmFkaW9cIj5cclxuICAgICAgPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDogMTAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JHtsaW19PC9zcGFuPlxyXG4gICAgICA8L2xhYmVsPlxyXG4gICAgYDtcclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAkKFwiI2xpbWl0VWxcIikuYXBwZW5kKGFkZExpbWl0KTtcclxuICBcclxuICAgICQoXCIubGltaXRSYWRpbzplcSgwKVwiKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgXHJcbiAgXHJcbiAgICAgICAgLyogTGltaXQgc2VhcmNoICovXHJcbiAgXHJcbiAgICAgICAgJChcIi5saW1pdFJhZGlvXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gIFxyXG4gICAgICAgIGxpbWl0ID0gJCh0aGlzKS5wYXJlbnQoXCIucmFkaW9cIikudGV4dCgpO1xyXG4gICAgICAgIGxpbWl0ID0gbGltaXQudHJpbSgpOyAgXHJcbiAgXHJcbiAgICAgICAgc2VhcmNoKCk7XHJcbiAgICB9KTtcclxuICBcclxuICBcclxuICBcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgZnVuY3Rpb24gc29ydGluZygpIHtcclxuICBcclxuICAgICAgICAvKiBTb3J0IGRvY3VtZW50cyAqL1xyXG4gIFxyXG4gICAgICAgICQoXCIuc29ydFJhZGlvXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgIHNvcnQgPSAkKHRoaXMpLnBhcmVudChcIi5yYWRpb1wiKS50ZXh0KCk7XHJcbiAgICAgIHNvcnQgPSBzb3J0LnRyaW0oKTsgIFxyXG4gIFxyXG4gICAgICBzZWFyY2goKTtcclxuICB9KTtcclxuICBcclxuICBcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gZGlzcGxheWluZygpIHtcclxuICAgIFxyXG4gICAgY29uc3QgZGlzcGxheUFycmF5ID0gW1wiQWxsXCIsIFwiQ29tcGxldGVkXCIsIFwiTm90IGNvbXBsZXRlZFwiXTtcclxuICBcclxuICAgICAgbGV0IGFkZERpc3BsYXkgPSAnJztcclxuICAgICAgZGlzcGxheUFycmF5LmZvckVhY2goKGRpcywgaSkgPT4ge1xyXG4gICAgICBhZGREaXNwbGF5ICs9IGBcclxuICAgICAgPGxhYmVsIGNsYXNzPVwicmFkaW9cIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImRpc3BsYXlSYWRpb1wiIG5hbWU9XCJkaXNwbGF5XCIgdHlwZT1cInJhZGlvXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cImZvbnQtd2VpZ2h0OiAxMDA7IHRleHQtYWxpZ246IGNlbnRlcjtcIj4ke2Rpc308L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgYDtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgJChcIiNkaXNwbGF5VWxcIikuYXBwZW5kKGFkZERpc3BsYXkpO1xyXG4gIFxyXG4gICAgJChcIi5kaXNwbGF5UmFkaW86ZXEoMClcIikuYXR0cignY2hlY2tlZCcsIHRydWUpO1xyXG4gIFxyXG4gICAgICBcclxuICAgICAgICAgIC8qIERpc3BsYXkgZG9jdW1lbnRzICovXHJcbiAgXHJcbiAgICAgICAgJChcIi5kaXNwbGF5UmFkaW9cIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgXHJcbiAgICAgIGRpc3BsYXkgPSAkKHRoaXMpLnBhcmVudChcIi5yYWRpb1wiKS50ZXh0KCk7XHJcbiAgICAgIGRpc3BsYXkgPSBkaXNwbGF5LnRyaW0oKTsgIFxyXG4gIFxyXG4gICAgICBpZiAoZGlzcGxheSA9PSBcIk5vdCBjb21wbGV0ZWRcIikge1xyXG4gICAgICAgICQoXCIuc29ydENvbXBsZXRlZFwiKS5hdHRyKFwiZGlzYWJsZWRcIix0cnVlKTtcclxuICAgICAgICAkKGAubGFiZWxDb21wbGV0ZWRgKS5jc3MoeyBcImN1cnNvclwiOiBcImRlZmF1bHRcIiB9KTtcclxuICAgICAgICAkKFwiLmxhYmVsQ29tcGxldGVkXCIpLmhvdmVyKCAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgJCh0aGlzKS5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwiIzIyMlwiKTtcclxuICAgICAgICB9KTtcclxuICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiLnNvcnRDb21wbGV0ZWRcIikuYXR0cihcImRpc2FibGVkXCIsZmFsc2UpO1xyXG4gICAgICAgICQoYC5sYWJlbENvbXBsZXRlZGApLmNzcyh7IFwiY3Vyc29yXCI6IFwicG9pbnRlclwiIH0pO1xyXG4gIFxyXG4gICAgICAgICQoXCIubGFiZWxDb21wbGV0ZWRcIikub24oJ21vdXNlZW50ZXInLCAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgJCh0aGlzKS5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwiIzAwN0JGRlwiKTtcclxuICAgICAgICB9KTtcclxuICBcclxuICAgICAgICAkKFwiLmxhYmVsQ29tcGxldGVkXCIpLm9uKCdtb3VzZWxlYXZlJywgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICQodGhpcykuY3NzKFwiYmFja2dyb3VuZFwiLCBcIiMyMjJcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIH1cclxuICBcclxuICAgICAgc2VhcmNoKCk7XHJcbiAgXHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gIH1cclxuICBcclxuXHJcbiAgICAvKiBGYWRlIGluIC8gb3V0IG5hdmJhciBpbm5lciBsaXN0cyAqL1xyXG4gICBcclxuJChcIi5uYXZiYXJMaVwiKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5maW5kKFwiLmlubmVyVWxcIikuZmFkZUluKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJChcIi5uYXZiYXJMaVwiKS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5maW5kKFwiLmlubmVyVWxcIikuZmFkZU91dCgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuXHJcblxyXG4vKiBTZWFyY2ggVG9kb3MgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBzZWFyY2goKSB7XHJcblxyXG4gICAgbGV0IGNvb2tpZSA9IGdldENvb2tpZSgpO1xyXG5cclxuICAgIGxldCB0b2tlbiA9IGNvb2tpZVswXS5zdWJzdHIoOSw5OTkpLnRvU3RyaW5nKCk7XHJcbiAgICB0b2tlbiA9IHRva2VuLnRyaW0oKTtcclxuXHJcbiAgICAvLyBmb3Igbm93IFxyXG4gICAgaWRzQXJyID0gW107IFxyXG5cclxuICAgIGxldCB0ZXh0ID0gJChcIi5zZWFyY2hUb2Rvc0Zvcm1cIikudmFsKCk7XHJcblxyXG4gICAgaWYgKHRleHQgPT0gJycpIHtcclxuICAgICAgdGV4dCA9IFwiLlwiO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICB1cmw6IGAvdG9kb3MvJHt0ZXh0fS8ke2Rpc3BsYXl9LyR7bGltaXR9LyR7c29ydH0vYCxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwieC1hdXRoXCIgOiB0b2tlblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gJyc7IC8vIGFsaWduIGxpc3QsIEkgdGhpbmtcclxuICAgICAgICAgICAgdmFyIGlkID0gJyc7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnRvZG9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZCA9IGRhdGEudG9kb3NbaV0uX2lkLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHRleHQgPSBkYXRhLnRvZG9zW2ldLnRleHQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkYXRhLnRvZG9zW2ldLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHN0YXR1cyA9ICcnO1xyXG4gICAgICAgICAgICBsZXQgZmluaXNoZWQgPSAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBzaG9ydGVuVGl0bGUgPSBkYXRhLnRvZG9zW2ldLnRleHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZGF0YS50b2Rvc1tpXS50ZXh0Lmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICBzaG9ydGVuVGl0bGUgPSBkYXRhLnRvZG9zW2ldLnRleHQuc3Vic3RyKDAsNTApICsgXCIuLi5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGRhdGEudG9kb3NbaV0uY29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICBzdGF0dXMgPSBcIkNvbXBsZXRlZFwiO1xyXG4gICAgICAgICAgICAgZmluaXNoZWQgPSBcIkNvbXBsZXRlZCBBdDogXCIgKyBkYXRhLnRvZG9zW2ldLmNvbXBsZXRlZEF0LnN1YnN0cigxMiw4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgIHN0YXR1cyA9IFwiTm90IGNvbXBsZXRlZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsaXN0ICs9IGA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIHRvZG9Db250YWluZXJcIiBvbmNsaWNrPVwiYWRkSWRUb0FycmF5KFxcYGAgKyBkYXRhLnRvZG9zW2ldLl9pZCArIGBcXGApXCI+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tOVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTJcIj5cclxuICAgICAgICAgICAgPGgzIGNsYXNzPVwidGl0bGVcIj4ke3Nob3J0ZW5UaXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPjxwIGNsYXNzPVwic3RhdHVzXCI+JHtzdGF0dXN9PC9wPjwvZGl2PlxyXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+PHAgY2xhc3M9XCJmaW5pc2hlZFwiPiR7ZmluaXNoZWR9PC9wPiA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tM1wiIHN0eWxlPVwiaGVpZ2h0OiAxMDVweDtcIj4gXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTQgdG9kb0J0bkNvbFwiPlxyXG4gICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biB0b2RvQnRuXCIgdGl0bGU9XCJVcGRhdGUgVG9kb1wiIG9uY2xpY2s9XCJvcGVuTW9kYWwoXFxgYCArIHRleHQgKyBgXFxgLCBcXGBgICsgZGVzY3JpcHRpb24gKyBgXFxgLCAke2RhdGEudG9kb3NbaV0uY29tcGxldGVkfSxcXGBgICsgaWQgKyBgXFxgLFxcYGAgKyBkYXRhLnRvZG9zW2ldLmNvbXBsZXRlZEF0ICsgYFxcYCwgJHtpfSwgXFxgYCArIGRhdGEudG9kb3NbaV0uY3JlYXRlZEF0ICsgYFxcYClcIj48aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00IHRvZG9CdG5Db2xcIj5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm91dGVyXCIgdGl0bGU9XCJDb21wbGV0ZSBUb2RvXCIgb25jbGljaz0nY29tcGxldGVUb2RvKCR7ZGF0YS50b2Rvc1tpXS5jb21wbGV0ZWR9LFxcYGAgKyBpZCArIGBcXGAsICR7aX0pJz5cclxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2l0Y2hcIj48L2Rpdj5cclxuICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNCB0b2RvQnRuQ29sXCI+XHJcbiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gdG9kb0J0blwiIHRpdGxlPVwiUmVtb3ZlIFRvZG9cIiBpZD1cInJlbW92ZVRvZG9CdG5cIiBvbmNsaWNrPVwiZGVsZXRlVG9kbyhcXGBgICsgaWQgKyBgXFxgKVwiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgIDwvZGl2PmA7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gV2hlbiB5b3Ugc2VhcmNoIHlvdSByZW1vdmUgYWxsIHByZXZpb3VzIHRvZG9zIGFuZCByZXBsYWNlIHdpdGggdGhlIG5ldyBvbmVzIHRoYXQgZml0IHRoZSBzZWFyY2hcclxuICAgICAgICAgICAgJChcIi50b2RvQ29udGFpbmVyXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKFwiI2xpc3RPZlRvZG9zXCIpLmFwcGVuZChsaXN0KTtcclxuXHJcblxyXG4gICAgICAgICAgICBhZGREYXJrU2VsZWN0ID0gJChcIi50b2RvQ29udGFpbmVyXCIpO1xyXG5cclxuICAgICAgICAgICAgYWRkRGFya1NlbGVjdC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImRhcmtTZWxlY3RcIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvKiBTY3JvbGwgdXNpbmcgc2Vzc2lvbiBzdG9yYWdlICovIFxyXG5cclxuICAgICAgICAgICAgICAgICQoXCIub3V0ZXIsIC50b2RvQnRuXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzY3JvbGxQb3NpdGlvbicsIGN1cnJlbnRTY3JvbGxQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgZGFya1NlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIudG9kb0NvbnRhaW5lclwiKS5yZW1vdmVDbGFzcyhcImRhcmtTZWxlY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRzQXJyID0gW107IFxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyogb25jZSB0ZXh0IGlzIGFkZGVkIHdlIGNhbiB0b2dnbGUgdGhlIGNsYXNzIHdpdGggY291bnRlciBmcm9tIGFub3RoZXIgZm9yIGxvb3AgKi9cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAgZGF0YS50b2Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRvZG9zW2ldLmNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoYC5zd2l0Y2g6ZXEoJHtpfSlgKS5hZGRDbGFzcyhcIm1vdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChgLnRpdGxlOmVxKCR7aX0pYCkuY3NzKHsgXCJ0ZXh0LWRlY29yYXRpb25cIjogXCJsaW5lLXRocm91Z2hcIiB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAkKGAuc3dpdGNoOmVxKCR7aX0pYCkucmVtb3ZlQ2xhc3MoXCJtb3ZlXCIpO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qIEVOVEVSIEtFWSAqL1xyXG5cclxuICAgIC8vIFBvc3RpbmcgdG9kb3NcclxuXHJcbiAkKFwiI2lucHV0VGl0bGVcIikua2V5dXAoZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgaWYoZXZlbnQua2V5Q29kZSA9PSAxMyl7XHJcbiAgICAgc3VibWl0KCk7XHJcbiAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZWFyY2hpbmcgdG9kb3NcclxuXHJcbiAgICAkKFwiLnNlYXJjaFRvZG9zRm9ybVwiKS5rZXl1cChmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgaWYoZXZlbnQua2V5Q29kZSA9PSAxMyl7XHJcbiAgICAgICAgIHNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAvKiBTRUxFQ1QgVE9ET1MgKi8gXHJcblxyXG4gICAgICAgIGxldCBhZGRJZFRvQXJyYXkgPSAoaWQpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICggaWRzQXJyLmluY2x1ZGVzKGlkKSApIHtcclxuICAgICAgICAgICAgICAgIGlkc0Fyci5zcGxpY2UoaWRzQXJyLmZpbmRJbmRleChpbmRleCA9PiBpbmRleCA9PSBpZCkpOyAvLyBpZiBlbGVtZW50IGlzIGluIGFycmF5LCBmaW5kIGluZGV4ICYgcmVtb3ZlIGVsZW1lbnQgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWRzQXJyLnB1c2goaWQpOyAgICAvLyBlbHNlIHB1c2ggaXQgdG8gYXJyYXlcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBERUxFVEUgS0VZICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEtleVByZXNzQ2hlY2soZXZlbnQpe1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gNDQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGFkZERhcmtTZWxlY3QuaGFzQ2xhc3MoXCJkYXJrU2VsZWN0XCIpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzY3JvbGxQb3NpdGlvbicsIGN1cnJlbnRTY3JvbGxQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb29raWUgPSBnZXRDb29raWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRva2VuID0gY29va2llWzBdLnN1YnN0cig5LDk5OSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2VuLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy90b2Rvcy8nICsgaWRzQXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3gtYXV0aCcgOiB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb29raWUoKSAge1xyXG5cclxuICAgIHZhciB2YWx1ZSA9IFwiOyBcIiArIGRvY3VtZW50LmNvb2tpZTtcclxuICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KFwiOyBcIiArIG5hbWUgKyBcIj1cIik7XHJcbiAgICBpZiAocGFydHMubGVuZ3RoID09IDIpIHtcclxuICAgICAgICByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoXCI7XCIpLnNoaWZ0KCk7XHJcbiAgICAgICAgfSBcclxuICAgIHJldHVybiBwYXJ0cztcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXIoKSB7XHJcblxyXG4gICAgICAgIGxldCBjb29raWUgPSBnZXRDb29raWUoKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdG9rZW4gPSBjb29raWVbMF0uc3Vic3RyKDksOTk5KS50b1N0cmluZygpO1xyXG4gICAgICAgIHRva2VuID0gdG9rZW4udHJpbSgpO1xyXG4gICAgXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgdXJsIDogXCIvdXNlcnMvbWVcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICBcIngtYXV0aFwiIDogdG9rZW5cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaGVsbG9UaXRsZVwiKS50ZXh0Q29udGVudCA9IFwiSGVsbG8gXCIgKyBkYXRhLnVzZXJuYW1lO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBMb2cgb3V0IHVzZXJcclxuXHJcbiAgICBsZXQgbG9nb3V0ID0gKCkgPT4ge1xyXG5cclxuICAgICAgICBsZXQgY29va2llID0gZ2V0Q29va2llKCk7XHJcblxyXG4gICAgICAgIGxldCB0b2tlbiA9IGNvb2tpZVswXS5zdWJzdHIoOSw5OTkpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdG9rZW4gPSB0b2tlbi50cmltKCk7XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL3VzZXJzL21lL3Rva2VuJyxcclxuICAgICAgICB0eXBlOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwieC1hdXRoXCIgOiB0b2tlblxyXG4gICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjsgfSAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgIH1cclxuIl19
