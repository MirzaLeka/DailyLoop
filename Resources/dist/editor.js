"use strict";function placeCaretAtEnd(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var s=document.body.createTextRange();s.moveToElementText(e),s.collapse(!1),s.select()}}function cleanHtml(){var e=$("#editor").html();sanitizeHtml(e,{allowedTags:["div","blockquote","b","strong","i","em","ul","ol","li"],allowedAttributes:{blockquote:["style"]}}).trim();setContent()}function setContent(){$(this).html();placeCaretAtEnd($("#editor").get(0))}function runCommand(e,t,n){if("createLink"===t){var s=prompt("Insert link:");document.execCommand(t,!1,s)}else document.execCommand(t,!1,n);return $("#editor").focus(),!1}!function(a){a.fn.msword_html_filter=function(e){a.extend({},e);return this.each(function(){var t=this;a(t).on("keyup paste",function(){setTimeout(function(){var e=a(t).html();/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)?function(e){var t=e.html();t=(t=(t=(t=(t=t.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi," ")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("Â "):""}),e.html(t),a("p",e).each(function(){var e=a(this).attr("style"),t=/mso-list:\w+ \w+([0-9]+)/.exec(e);t&&a(this).data("_listLevel",parseInt(t[1],10))});var i=0,r=null;a("p",e).each(function(){var e=a(this).data("_listLevel");if(null!=e){var t=a(this).text(),n="<ul></ul>";if(/^\s*\w+\./.test(t)){var s=/([0-9])\./.exec(t);if(s){var l=parseInt(s[1],10);n=1<l?'<ol start="'+l+'"></ol>':"<ol></ol>"}else n="<ol></ol>"}if(i<e&&(r=0==i?(a(this).before(n),a(this).prev()):a(n).appendTo(r)),e<i)for(var o=0;o<i-e;o++)r=r.parent();a("span:first",this).remove(),r.append("<li>"+a(this).html().replace(/\d+\./g,"")+"</li>"),a("b:empty").remove(),a(this).remove(),i=e}else i=0}),a("[style]",e).removeAttr("style"),a("[align]",e).removeAttr("align"),a("span",e).replaceWith(function(){return a(this).contents()}),a("span:empty",e).remove(),a("[class^='Mso']",e).removeAttr("class"),a("p:empty",e).remove()}(a(t)):cleanHtml()},400)})})}}(jQuery),$(function(){$("#editor").msword_html_filter()}),$("#submit").click(function(e){e.preventDefault();var t=$("#editor").html().trim();alert("VALUE SUBMITTED: \n"+t)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRvci5qcyJdLCJuYW1lcyI6WyJwbGFjZUNhcmV0QXRFbmQiLCJlbCIsImZvY3VzIiwiZG9jdW1lbnQiLCJjcmVhdGVSYW5nZSIsInJhbmdlIiwic2VsZWN0Tm9kZUNvbnRlbnRzIiwiZ2V0U2VsZWN0aW9uIiwiY29sbGFwc2UiLCJzZWwiLCJ3aW5kb3ciLCJyZW1vdmVBbGxSYW5nZXMiLCJib2R5IiwiY3JlYXRlVGV4dFJhbmdlIiwiYWRkUmFuZ2UiLCJ0ZXh0UmFuZ2UiLCJtb3ZlVG9FbGVtZW50VGV4dCIsImNsZWFuSHRtbCIsInZhbHVlIiwiJCIsImh0bWwiLCJjbGVhbiIsInNhbml0aXplSHRtbCIsImFsbG93ZWRUYWdzIiwidHJpbSIsInNldENvbnRlbnQiLCJ0aGlzIiwiZ2V0IiwicnVuQ29tbWFuZCIsImNvbW1hbmROYW1lIiwiYXJnIiwiYXJndW1lbnQiLCJleGVjQ29tbWFuZCIsImZuIiwibXN3b3JkX2h0bWxfZmlsdGVyIiwib3B0aW9ucyIsImV4dGVuZCIsImVhY2giLCJzZWxmIiwiZWRpdG9yIiwib24iLCJzZXRUaW1lb3V0IiwiY29udGVudCIsInRlc3QiLCJzZXR0aW5ncyIsInJlcGxhY2UiLCJzdHIiLCJzcGFjZXMiLCJsZW5ndGgiLCJzbGljZSIsIk1hdGgiLCJmbG9vciIsInNwbGl0Iiwiam9pbiIsImF0dHIiLCJleGVjIiwibWF0Y2hlcyIsImRhdGEiLCJwYXJzZUludCIsImxhc3RfbGV2ZWwiLCJwbnQiLCJjdXJfbGV2ZWwiLCJ1bmRlZmluZWQiLCJ0ZXh0IiwidHh0IiwibGlzdF90YWciLCJzdGFydCIsInByZXYiLCJhcHBlbmRUbyIsImkiLCJyZW1vdmUiLCJhcHBlbmQiLCJyZW1vdmVBdHRyIiwiY29udGVudHMiLCJyZXBsYWNlV2l0aCIsIndvcmRfZmlsdGVyIiwialF1ZXJ5IiwiY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiXSwibWFwcGluZ3MiOiJhQUNBLFNBQVNBLGdCQUFnQkMsR0FBekIsR0FEQUEsRUFBQUMs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VixFQUFBRSxFQUFBUSxJQUNFUixFQUFVRixFQUFBQSxTQUdWeEMsRUFBQSxhQUFBTyxNQUFBNEMsU0FDRlYsRUFBQVcsT0FBQSxPQUFBcEQsRUFBQU8sTUFBQU4sT0FBQXlCLFFBQUEsU0FBQSxJQUFBLFNBQ0MxQixFQUFBLFdBQUZtRCxTQUNJQyxFQUFKN0MsTUFBVzRDLFNBQ1RYLEVBQUZFLE9BRUFGLEVBQWFFLElBaENyQjFDLEVBQUEsVUFBQW9CLEdBQUFpQyxXQUFBLFNBdUNBckQsRUFBRSxVQUFXb0IsR0FBUWlDLFdBQVcsU0FEOUJyRCxFQUFBLE9BQVdvQixHQUFRaUMsWUFBVyxXQUFoQyxPQUFBckQsRUFBQU8sTUFBQStDLGFBQ0V0RCxFQUFBLGFBQUZvQixHQUFxQmlDLFNBQ25CckQsRUFBQSxpQkFBZ0J1RCxHQUFZRixXQUFXLFNBQUNyRCxFQUFBLFVBQWVzRCxHQUFSSCxTQVFiSyxDQUFBeEQsRUFBQW1CLElBQUFyQixhQUsvQixVQTlGYixDQThGVzJELFFBR056RCxFQWhHRCxXQWlHQXlELEVBQUFBLFdBbEdKMUMsdUJBc0lBZixFQUFFLFdBQVcwRCxNQUFNLFNBQVNDLEdBRDVCQSxFQUFBQyxpQkFDRSxJQUFBckMsRUFBRnZCLEVBQW1CLFdBQUFDLE9BQVlJLE9BQzNCdUQsTUFBQUEsc0JBQUZyQyIsImZpbGUiOiJlZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNb3ZlIGNhcmV0IGJhY2sgdG8gXHJcbmZ1bmN0aW9uIHBsYWNlQ2FyZXRBdEVuZChlbCkge1xyXG4gICAgZWwuZm9jdXMoKTtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93LmdldFNlbGVjdGlvbiAhPSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVSYW5nZSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XHJcbiAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbCk7XHJcbiAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcclxuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UgIT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB2YXIgdGV4dFJhbmdlID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcclxuICAgICAgdGV4dFJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KGVsKTtcclxuICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcclxuICAgICAgdGV4dFJhbmdlLnNlbGVjdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBDbGVhbiBIVE1MIHRhZ3MgdXNpbmcgc2FuaXRpemUtaHRtbFxyXG4gIGZ1bmN0aW9uIGNsZWFuSHRtbCgpIHsgIFxyXG4gICAgbGV0IHZhbHVlID0gJChcIiNlZGl0b3JcIikuaHRtbCgpO1xyXG4gICAgbGV0IGNsZWFuID0gc2FuaXRpemVIdG1sKHZhbHVlLCB7XHJcbiAgICAgIGFsbG93ZWRUYWdzOiBbJ2RpdicsICdibG9ja3F1b3RlJywgJ2InLCAnc3Ryb25nJywgJ2knLCAnZW0nLCAndWwnLCAnb2wnLCAnbGknXSxcclxuICAgICAgYWxsb3dlZEF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAnYmxvY2txdW90ZSc6IFsnc3R5bGUnXVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICBcclxuICAgIGxldCBjbGVhblZhbHVlID0gY2xlYW4udHJpbSgpOyAgXHJcbiAgICBzZXRDb250ZW50KCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFBhc3RlIGZyb20gTVMgV29yZCAgICAqQ1JFRElUOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9zYnJpbi82ODAxMDM0XHJcbiAgKGZ1bmN0aW9uKCQpIHtcclxuICAgICAgJC5mbi5tc3dvcmRfaHRtbF9maWx0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCBvcHRpb25zKTtcclxuICBcclxuICAgICAgICBmdW5jdGlvbiB3b3JkX2ZpbHRlcihlZGl0b3Ipe1xyXG4gICAgICAgICAgbGV0IGNvbnRlbnQgPSBlZGl0b3IuaHRtbCgpO1xyXG4gIFxyXG4gICAgICAgICAgLy8gV29yZCBjb21tZW50cyBsaWtlIGNvbmRpdGlvbmFsIGNvbW1lbnRzIGV0Y1xyXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPCEtLVtcXHNcXFNdKz8tLT4vZ2ksICcnKTtcclxuICBcclxuICAgICAgICAgIC8vIFJlbW92ZSBjb21tZW50cywgc2NyaXB0cyAoZS5nLiwgbXNvU2hvd0NvbW1lbnQpLCBYTUwgdGFnLCBWTUwgY29udGVudCxcclxuICAgICAgICAgIC8vIE1TIE9mZmljZSBuYW1lc3BhY2VkIHRhZ3MsIGFuZCBhIGZldyBvdGhlciB0YWdzXHJcbiAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88KCF8c2NyaXB0W14+XSo+Lio/PFxcL3NjcmlwdCg/PVs+XFxzXSl8XFwvPyhcXD94bWwoOlxcdyspP3xpbWd8bWV0YXxsaW5rfHN0eWxlfFxcdzpcXHcrKSg/PVtcXHNcXC8+XSkpW14+XSo+L2dpLCAnJyk7XHJcbiAgXHJcbiAgICAgICAgICAvLyBDb252ZXJ0IDxzPiBpbnRvIDxzdHJpa2U+IGZvciBsaW5lLXRob3VnaFxyXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPChcXC8/KXM+L2dpLCBcIjwkMXN0cmlrZT5cIik7XHJcbiAgXHJcbiAgICAgICAgICAvLyBSZXBsYWNlIG5ic3AgZW50aXRlcyB0byBjaGFyIHNpbmNlIGl0J3MgZWFzaWVyIHRvIGhhbmRsZVxyXG4gICAgICAgICAgLy9jb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8mbmJzcDsvZ2ksIFwiXFx1MDBhMFwiKTtcclxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyZuYnNwOy9naSwgJyAnKTtcclxuICBcclxuICAgICAgICAgIC8vIENvbnZlcnQgPHNwYW4gc3R5bGU9XCJtc28tc3BhY2VydW46eWVzXCI+X19fPC9zcGFuPiB0byBzdHJpbmcgb2YgYWx0ZXJuYXRpbmdcclxuICAgICAgICAgIC8vIGJyZWFraW5nL25vbi1icmVha2luZyBzcGFjZXMgb2Ygc2FtZSBsZW5ndGhcclxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzxzcGFuXFxzK3N0eWxlXFxzKj1cXHMqXCJcXHMqbXNvLXNwYWNlcnVuXFxzKjpcXHMqeWVzXFxzKjs/XFxzKlwiXFxzKj4oW1xcc1xcdTAwYTBdKik8XFwvc3Bhbj4vZ2ksIGZ1bmN0aW9uKHN0ciwgc3BhY2VzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc3BhY2VzLmxlbmd0aCA+IDApID8gc3BhY2VzLnJlcGxhY2UoLy4vLCBcIiBcIikuc2xpY2UoTWF0aC5mbG9vcihzcGFjZXMubGVuZ3RoLzIpKS5zcGxpdChcIlwiKS5qb2luKFwiXFx1MDBhMFwiKSA6ICcnO1xyXG4gICAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgICAgICBlZGl0b3IuaHRtbChjb250ZW50KTtcclxuICBcclxuICAgICAgICAgIC8vIFBhcnNlIG91dCBsaXN0IGluZGVudCBsZXZlbCBmb3IgbGlzdHNcclxuICAgICAgICAgICQoJ3AnLCBlZGl0b3IpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbGV0IHN0ciA9ICQodGhpcykuYXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSAvbXNvLWxpc3Q6XFx3KyBcXHcrKFswLTldKykvLmV4ZWMoc3RyKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ19saXN0TGV2ZWwnLCAgcGFyc2VJbnQobWF0Y2hlc1sxXSwgMTApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgICAgICAvLyBQYXJzZSBMaXN0c1xyXG4gICAgICAgICAgbGV0IGxhc3RfbGV2ZWw9MDtcclxuICAgICAgICAgIGxldCBwbnQgPSBudWxsO1xyXG4gICAgICAgICAgJCgncCcsIGVkaXRvcikuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIGxldCBjdXJfbGV2ZWwgPSAkKHRoaXMpLmRhdGEoJ19saXN0TGV2ZWwnKTtcclxuICAgICAgICAgICAgICBpZihjdXJfbGV2ZWwgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgbGV0IHR4dCA9ICQodGhpcykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbGlzdF90YWcgPSAnPHVsPjwvdWw+JztcclxuICAgICAgICAgICAgICAgICAgaWYgKC9eXFxzKlxcdytcXC4vLnRlc3QodHh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSAvKFswLTldKVxcLi8uZXhlYyh0eHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBwYXJzZUludChtYXRjaGVzWzFdLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdF90YWcgPSBzdGFydD4xID8gJzxvbCBzdGFydD1cIicgKyBzdGFydCArICdcIj48L29sPicgOiAnPG9sPjwvb2w+JztcclxuICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RfdGFnID0gJzxvbD48L29sPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgICAgICAgaWYoY3VyX2xldmVsPmxhc3RfbGV2ZWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGxhc3RfbGV2ZWw9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5iZWZvcmUobGlzdF90YWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcG50ID0gJCh0aGlzKS5wcmV2KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwbnQgPSAkKGxpc3RfdGFnKS5hcHBlbmRUbyhwbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpZihjdXJfbGV2ZWw8bGFzdF9sZXZlbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8bGFzdF9sZXZlbC1jdXJfbGV2ZWw7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwbnQgPSBwbnQucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICQoJ3NwYW46Zmlyc3QnLCB0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgcG50LmFwcGVuZCgnPGxpPicgKyAkKHRoaXMpLmh0bWwoKS5yZXBsYWNlKC9cXGQrXFwuL2csICcnKSArICc8L2xpPicpXHJcbiAgICAgICAgICAgICAgICAgICQoJ2I6ZW1wdHknKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgbGFzdF9sZXZlbCA9IGN1cl9sZXZlbDtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgbGFzdF9sZXZlbCA9IDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICBcclxuICAgICAgICAgICQoJ1tzdHlsZV0nLCBlZGl0b3IpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAkKCdbYWxpZ25dJywgZWRpdG9yKS5yZW1vdmVBdHRyKCdhbGlnbicpO1xyXG4gICAgICAgICAgJCgnc3BhbicsIGVkaXRvcikucmVwbGFjZVdpdGgoZnVuY3Rpb24oKSB7cmV0dXJuICQodGhpcykuY29udGVudHMoKTt9KTtcclxuICAgICAgICAgICQoJ3NwYW46ZW1wdHknLCBlZGl0b3IpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgJChcIltjbGFzc149J01zbyddXCIsIGVkaXRvcikucmVtb3ZlQXR0cignY2xhc3MnKTtcclxuICAgICAgICAgICQoJ3A6ZW1wdHknLCBlZGl0b3IpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgJChzZWxmKS5vbigna2V5dXAgcGFzdGUnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSAkKHNlbGYpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAoL2NsYXNzPVwiP01zb3xzdHlsZT1cIlteXCJdKlxcYm1zby18c3R5bGU9J1teJyddKlxcYm1zby18dzpXb3JkRG9jdW1lbnQvaS50ZXN0KCBjb250ZW50ICkpID8gd29yZF9maWx0ZXIoICQoc2VsZikgKSA6IGNsZWFuSHRtbCgpO1xyXG4gICAgICAgICAgICB9LCA0MDApOyAgICAgICAgICAgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICB9KSggalF1ZXJ5IClcclxuICBcclxuICBcclxuICAkKGZ1bmN0aW9uKCl7ICBcclxuICAgICQoJyNlZGl0b3InKS5tc3dvcmRfaHRtbF9maWx0ZXIoKTsgXHJcbiAgfSlcclxuICBcclxuICBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xyXG4gICAgbGV0IHZhbHVlID0gJCh0aGlzKS5odG1sKCk7XHJcbiAgICBcclxuICAgIGxldCBlbCA9ICQoXCIjZWRpdG9yXCIpLmdldCgwKTtcclxuICAgIHBsYWNlQ2FyZXRBdEVuZChlbCk7XHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIC8vIyMjIEVWRU5UUy9BQ1RJT05TICMjIy8vXHJcbiAgXHJcbiAgLy9leGVjQ29tbWFuZChhQ29tbWFuZE5hbWUsIGFTaG93RGVmYXVsdFVJLCBhVmFsdWVBcmd1bWVudClcclxuICBmdW5jdGlvbiBydW5Db21tYW5kKGVsLCBjb21tYW5kTmFtZSwgYXJnKSB7ICBcclxuICAgIGlmIChjb21tYW5kTmFtZSA9PT0gXCJjcmVhdGVMaW5rXCIpIHtcclxuICAgICAgbGV0IGFyZ3VtZW50ID0gcHJvbXB0KFwiSW5zZXJ0IGxpbms6XCIpO1xyXG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChjb21tYW5kTmFtZSwgZmFsc2UsIGFyZ3VtZW50KTtcclxuICAgIH1lbHNlIHsgICAgXHJcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKGNvbW1hbmROYW1lLCBmYWxzZSwgYXJnKTtcclxuICAgIH0gIFxyXG4gICAgJChcIiNlZGl0b3JcIikuZm9jdXMoKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgLy8gQ2FwdHVyZSB3eXNpd3lnIHZhbCBhbmQgYXNzaWduIHRvIHRleHRhcmVhIHZhbFxyXG4gIC8vICQoXCIjZWRpdG9yXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xyXG4gIC8vICAgbGV0IHZhbHVlID0gJCh0aGlzKS5odG1sKCk7XHJcbiAgLy8gICAkKFwiI21lc3NhZ2VUZXh0XCIpLnZhbCh2YWx1ZSk7ICBcclxuICAvLyB9KTtcclxuICBcclxuICAvLyBTaG93IHN1Ym1pdHRlZCBkYXRhXHJcbiAgJCgnI3N1Ym1pdCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBjb250ZW50ID0gJChcIiNlZGl0b3JcIikuaHRtbCgpLnRyaW0oKTtcclxuICAgIGFsZXJ0KFwiVkFMVUUgU1VCTUlUVEVEOiBcXG5cIiArIGNvbnRlbnQpOyAgXHJcbiAgfSk7Il19
