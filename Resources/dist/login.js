"use strict";function changeForm(e){var n=document.getElementById("form");0==e?(n.innerHTML='\n        \n        <form class="signup-form" onsubmit="register();return false">\n\n        <h2 class="formHeader">Sign Up</h2>\n\n        <input class="loginInput" name="signupUsername" type="text" placeholder="Username" autofocus/>\n    \n        <input class="loginInput" name="signupEmail" type="text" placeholder="Email"/>   \n    \n        <input class="loginInput" name="signupPassword" id="pass" type="password" placeholder="Password"/>\n\n        <input class="loginInput" name="confirmPassword" id="confirmPass" type="password" placeholder="Confirm Password"/>\n    <br>\n        <input class="btn btn-success formBtn" type="submit" id="confirmBtn" value="REGISTER"/>\n    \n        <p class="changeForm" onclick="changeForm(1)">Already a member?</p>\n\n    </form>\n        \n        ',extraValidation()):(n.innerHTML='\n\n        <form class="signin-form" onsubmit="login();return false">\n        \n        <h2 class="formHeader">Sign In</h2>\n    \n        <input class="loginInput" oninput="fixForm()" name="signinEmail" type="email" placeholder="Email" autofocus/>\n\n        <input class="loginInput" oninput="fixForm()" name="signinPassword" id="signinPass" type="password" placeholder="Password"/>\n            <label id="loginFailed">Incorrect username or password</label>\n    <br id="breakTag">\n        <input class="btn btn-primary formBtn" type="submit" id="loginBtn" value="CONTINUE"/>\n\n        <p class="changeForm" onclick="changeForm(0)">Not a member?</p>\n\n        </form>\n        \n        ',extraConfirmation())}function register(){extraValidation();var e=$("input[name='signupUsername']").val(),n=$("input[name='signupEmail']").val(),a=$("#pass").val(),s=$("#confirmPass").val();if(""!=e&&""!=n&&""!=a&&""!=s&&a==s){var i={username:e,email:n,password:a};$.ajax({type:"POST",url:"/users",contentType:"application/json",dataType:"json",data:JSON.stringify(i),success:function(e){window.location.href="/home"},error:function(e){e.responseJSON.errmsg.includes("username")?alert("Username is already in use."):alert("Email is already in use.")}})}}function login(){extraConfirmation();var e=$("input[name='signinEmail']").val(),n=$("#signinPass").val();if(""!=e&&""!=n){var a={email:e,password:n};$.ajax({type:"POST",url:"/users/login",contentType:"application/json",dataType:"json",data:JSON.stringify(a),success:function(e){e&&(window.location.href="/home")},error:function(e){e&&(document.getElementById("loginFailed").style.display="block",$("#breakTag").css("display","none"))}})}}function fixForm(){$("#breakTag").css("display","block"),document.getElementById("loginFailed").style.display="none"}function extraValidation(){$.validator.addMethod("nowhitespace",function(e,n){return this.optional(n)||/^\S+$/i.test(e)},"No white space please."),$.validator.addMethod("strongUsername",function(e,n){return this.optional(n)||6<=e.length&&/[a-z]/i.test(e)},"Username must be at least 6 characters long and contain at least one letter."),$.validator.addMethod("strongPassword",function(e,n){return this.optional(n)||8<=e.length&&/\d/.test(e)&&/[a-z]/i.test(e)&&/[$-/:-?{-~!"^_`\[\]]/.test(e)},"Password must be at least 8 characters long and contain at least one number, one letter and one symbol."),$(".signup-form").validate({rules:{signupUsername:{required:!0,nowhitespace:!0,strongUsername:!0,maxlength:24},signupEmail:{required:!0,email:!0},signupPassword:{required:!0,strongPassword:!0,nowhitespace:!0,maxlength:32},confirmPassword:{required:!0,equalTo:"#pass",nowhitespace:!0},messages:{signupEmail:{required:"Please enter an email address.",email:"Please enter a valid email address."}}}})}function extraConfirmation(){$(".signin-form").validate({rules:{signinEmail:{required:!0,email:!0},signinPassword:{required:!0},messages:{signinEmail:{required:"Please enter an email address.",email:"Please enter a valid email address."}}}})}$(function(){$.validator.addMethod("nowhitespace",function(e,n){return this.optional(n)||/^\S+$/i.test(e)},"No white space please."),$.validator.addMethod("strongUsername",function(e,n){return this.optional(n)||6<=e.length&&/[a-z]/i.test(e)},"Username must be at least 6 characters long and contain at least one letter."),$.validator.addMethod("strongPassword",function(e,n){return this.optional(n)||8<=e.length&&/\d/.test(e)&&/[a-z]/i.test(e)&&/[$-/:-?{-~!"^_`\[\]]/.test(e)},"Password must be at least 8 characters long and contain at least one number, one letter and one symbol."),$(".signin-form").validate({rules:{signinEmail:{required:!0,email:!0},signinPassword:{required:!0,strongPassword:!0,nowhitespace:!0,maxlength:32},messages:{signinEmail:{required:"Please enter an email address.",email:"Please enter a valid email address."}}}}),$(".signup-form").validate({rules:{signupUsername:{required:!0,nowhitespace:!0,strongUsername:!0,maxlength:24},signupEmail:{required:!0,email:!0},signupPassword:{required:!0,strongPassword:!0,nowhitespace:!0,maxlength:32},confirmPassword:{required:!0,equalTo:"#pass",nowhitespace:!0},messages:{signupEmail:{required:"Please enter an email address.",email:"Please enter a valid email address."}}}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImNoYW5nZUZvcm0iLCJudW0iLCJmb3JtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInZhbGlkYXRvciIsImV4dHJhQ29uZmlybWF0aW9uIiwicmVnaXN0ZXIiLCJleHRyYVZhbGlkYXRpb24iLCJkYXRhIiwiJCIsInZhbCIsImVtYWlsIiwicGFzc3dvcmQiLCJjb25maXJtIiwiYWpheCIsImRhdGFUeXBlIiwid2luZG93IiwidHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzIiwibG9jYXRpb24iLCJocmVmIiwiZXJyb3IiLCJlcnIiLCJyZXNwb25zZUpTT04iLCJlcnJtc2ciLCJpbmNsdWRlcyIsImFsZXJ0IiwicnVsZXMiLCJyZXF1aXJlZCIsInN0cm9uZ1Bhc3N3b3JkIiwibm93aGl0ZXNwYWNlIiwibWF4bGVuZ3RoIiwiY29udGVudFR5cGUiLCJjb25maXJtUGFzc3dvcmQiLCJlcXVhbFRvIiwibWVzc2FnZXMiLCJzdHlsZSIsImRpc3BsYXkiLCJjc3MiLCJhZGRNZXRob2QiLCJ2YWx1ZSIsImVsZW1lbnQiLCJ0aGlzIiwib3B0aW9uYWwiLCJ0ZXN0IiwibGVuZ3RoIiwidmFsaWRhdGUiLCJzaWdudXBVc2VybmFtZSIsInN0cm9uZ1VzZXJuYW1lIiwic2lnbnVwRW1haWwiLCJzaWdudXBQYXNzd29yZCIsInNpZ25pbkVtYWlsIiwic2lnbmluUGFzc3dvcmQiLCJ1c2VybmFtZSIsImVyclR5cGUiXSwibWFwcGluZ3MiOiJhQUNBLFNBQVNBLFdBQVdDLEdBRWhCLElBQUlDLEVBQU9DLFNBQVNDLGVBQWUsUUFFeEIsR0FBUEgsR0FJQUMsRUFBS0csVUFBTCwreEJBaUVOQyxvQkFnQkZKLEVBQUFHLFVBQUEsMHJCQWNrQkUscUJBZ0hiLFNBQUFDLFdBRURDLGtCQUVBLElBQUlDLEVBQU9DLEVBQUEsZ0NBQUFDLE1BQ1BDLEVBQUFGLEVBQVVFLDZCQURIRCxNQUVQRSxFQUFBSCxF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QUVUaEMsT0FBQUEsS0FBQUEsU0FBT2dDLElBVFIsR0FPVUQsRUFQVkssUUFXSEssU0FBQUEsS0FBQUEsSUFDSXRCLGdGQUdBRyxFQUFBQSxVQUFBQSxVQUFBQSxpQkFBVyxTQUFBUyxFQUFBQyxHQUpDLE9BQUFDLEtBWGJDLFNBQUFGLElBaUJIUixHQUFBQSxFQUFBQSxRQUNJTCxLQUFBQSxLQUFBQSxJQUNBTSxTQUFBQSxLQUFBQSxJQUNBSix1QkFBY2MsS0FBQUosSUFIRCwyR0FNQWpDLEVBQUEsZ0JBQUF1QyxTQUFBLENBRFBuQixNQUFBLENBdEJQd0IsWUFBQSxDQXZCQ3ZCLFVBQVUsRUFzQnRCbkIsT0FBQSxHQW5CUTJDLGVBQWdCLENBeURmaEQsVUFBVyxFQXZEUnlCLGdCQUFnQixFQXlEeEJ4QixjQUFBQSxFQXZEUTBCLFVBQVcsSUEwRGZ0QixTQUFVLENBQ1ZDLFlBQWEsQ0FDYkMsU0FBWSxpQ0F2REpGLE1BQU8sMkNBa0VmRixFQUFBLGdCQUFBdUMsU0FBYU8sQ0FDYjFCLE1BQUEsQ0FDQW9CLGVBQWFyQyxDQUhqQmtCLFVBQUEsRUFuRFFFLGNBQWMsRUF5RGZrQixnQkFBQSxFQUNIakMsVUFERyxJQUdIaUIsWUFBYyxDQUNkbkIsVUFBVSxFQUNWUCxPQUFZVyxHQXREWmlDLGVBQWdCLENBeURoQnBDLFVBQU9LLEVBUkpVLGdCQUFBLEVBOUNDQyxjQUFjLEVBeURsQlQsVUFBTyxJQUVKWSxnQkFBTXFCLENBdkRMMUIsVUFBVSxFQXlEVk0sUUFBSW9CLFFBQ0E1QixjQUFNLEdBRU5BLFNBQUFBLENBQ0h1QixZQUFBLENBRUpyQixTQUFBLGlDQXJCTG5CLE1BQUEiLCJmaWxlIjoibG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gY2hhbmdlRm9ybShudW0pIHtcclxuXHJcbiAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybVwiKTtcclxuXHJcbiAgICBpZiAobnVtID09IDApIHtcclxuICAgIFxyXG4gICAgICAgIC8qIFNpZ24gdXAgRm9ybSAqL1xyXG5cclxuICAgICAgICBmb3JtLmlubmVySFRNTCA9IGBcclxuICAgICAgICBcclxuICAgICAgICA8Zm9ybSBjbGFzcz1cInNpZ251cC1mb3JtXCIgb25zdWJtaXQ9XCJyZWdpc3RlcigpO3JldHVybiBmYWxzZVwiPlxyXG5cclxuICAgICAgICA8aDIgY2xhc3M9XCJmb3JtSGVhZGVyXCI+U2lnbiBVcDwvaDI+XHJcblxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luSW5wdXRcIiBuYW1lPVwic2lnbnVwVXNlcm5hbWVcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiVXNlcm5hbWVcIiBhdXRvZm9jdXMvPlxyXG4gICAgXHJcbiAgICAgICAgPGlucHV0IGNsYXNzPVwibG9naW5JbnB1dFwiIG5hbWU9XCJzaWdudXBFbWFpbFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiLz4gICBcclxuICAgIFxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luSW5wdXRcIiBuYW1lPVwic2lnbnVwUGFzc3dvcmRcIiBpZD1cInBhc3NcIiB0eXBlPVwicGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCIvPlxyXG5cclxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbklucHV0XCIgbmFtZT1cImNvbmZpcm1QYXNzd29yZFwiIGlkPVwiY29uZmlybVBhc3NcIiB0eXBlPVwicGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIkNvbmZpcm0gUGFzc3dvcmRcIi8+XHJcbiAgICA8YnI+XHJcbiAgICAgICAgPGlucHV0IGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIGZvcm1CdG5cIiB0eXBlPVwic3VibWl0XCIgaWQ9XCJjb25maXJtQnRuXCIgdmFsdWU9XCJSRUdJU1RFUlwiLz5cclxuICAgIFxyXG4gICAgICAgIDxwIGNsYXNzPVwiY2hhbmdlRm9ybVwiIG9uY2xpY2s9XCJjaGFuZ2VGb3JtKDEpXCI+QWxyZWFkeSBhIG1lbWJlcj88L3A+XHJcblxyXG4gICAgPC9mb3JtPlxyXG4gICAgICAgIFxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGV4dHJhVmFsaWRhdGlvbigpO1xyXG5cclxuICAgICAgICAvLyBhY3Rpb249XCIvaG9tZVwiIG1ldGhvZD1cImdldFwiXHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgLyogU2lnbiBpbiBGb3JtICovXHJcblxyXG4gICAgICAgIGZvcm0uaW5uZXJIVE1MID0gYFxyXG5cclxuICAgICAgICA8Zm9ybSBjbGFzcz1cInNpZ25pbi1mb3JtXCIgb25zdWJtaXQ9XCJsb2dpbigpO3JldHVybiBmYWxzZVwiPlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxoMiBjbGFzcz1cImZvcm1IZWFkZXJcIj5TaWduIEluPC9oMj5cclxuICAgIFxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luSW5wdXRcIiBvbmlucHV0PVwiZml4Rm9ybSgpXCIgbmFtZT1cInNpZ25pbkVtYWlsXCIgdHlwZT1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIGF1dG9mb2N1cy8+XHJcblxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luSW5wdXRcIiBvbmlucHV0PVwiZml4Rm9ybSgpXCIgbmFtZT1cInNpZ25pblBhc3N3b3JkXCIgaWQ9XCJzaWduaW5QYXNzXCIgdHlwZT1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiLz5cclxuICAgICAgICAgICAgPGxhYmVsIGlkPVwibG9naW5GYWlsZWRcIj5JbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgPGJyIGlkPVwiYnJlYWtUYWdcIj5cclxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgZm9ybUJ0blwiIHR5cGU9XCJzdWJtaXRcIiBpZD1cImxvZ2luQnRuXCIgdmFsdWU9XCJDT05USU5VRVwiLz5cclxuXHJcbiAgICAgICAgPHAgY2xhc3M9XCJjaGFuZ2VGb3JtXCIgb25jbGljaz1cImNoYW5nZUZvcm0oMClcIj5Ob3QgYSBtZW1iZXI/PC9wPlxyXG5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgXHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgZXh0cmFDb25maXJtYXRpb24oKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbiQoZnVuY3Rpb24oKSB7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwibm93aGl0ZXNwYWNlXCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKVxyXG4gICAgfHwgL15cXFMrJC9pLnRlc3QoIHZhbHVlICk7XHJcbn0sIFwiTm8gd2hpdGUgc3BhY2UgcGxlYXNlLlwiKTsgICBcclxuXHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3N0cm9uZ1VzZXJuYW1lJywgZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIFxyXG4gICAgICB8fCB2YWx1ZS5sZW5ndGggPj0gNlxyXG4gICAgICAmJiAvW2Etel0vaS50ZXN0KHZhbHVlKTtcclxuICB9LCAnVXNlcm5hbWUgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZyBhbmQgY29udGFpbiBhdCBsZWFzdCBvbmUgbGV0dGVyLicpXHJcblxyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdzdHJvbmdQYXNzd29yZCcsIGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSBcclxuICAgICAgfHwgdmFsdWUubGVuZ3RoID49IDhcclxuICAgICAgJiYgL1xcZC8udGVzdCh2YWx1ZSlcclxuICAgICAgJiYgL1thLXpdL2kudGVzdCh2YWx1ZSlcclxuICAgICAgJiYgL1skLS86LT97LX4hXCJeX2BcXFtcXF1dLy50ZXN0KHZhbHVlKTtcclxuICB9LCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZyBhbmQgY29udGFpbiBhdCBsZWFzdCBvbmUgbnVtYmVyLCBvbmUgbGV0dGVyIGFuZCBvbmUgc3ltYm9sLicpXHJcblxyXG5cclxuLyogU2lnbiBJbiBmb3JtIHZhbGlkYXRpb24gKi9cclxuXHJcbiQoXCIuc2lnbmluLWZvcm1cIikudmFsaWRhdGUoe1xyXG4gICAgcnVsZXM6IHtcclxuICAgICAgICBzaWduaW5FbWFpbDoge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNpZ25pblBhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBzdHJvbmdQYXNzd29yZDogdHJ1ZSxcclxuICAgICAgICAgICAgbm93aGl0ZXNwYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhsZW5ndGg6IDMyXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXNzYWdlczoge1xyXG4gICAgICAgICAgICBzaWduaW5FbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIGFuIGVtYWlsIGFkZHJlc3MuXCIsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufSk7XHJcblxyXG4vKiBTaWduIFVwIGZvcm0gdmFsaWRhdGlvbiAqL1xyXG5cclxuJChcIi5zaWdudXAtZm9ybVwiKS52YWxpZGF0ZSh7XHJcbiAgICBydWxlczoge1xyXG4gICAgICAgIHNpZ251cFVzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBub3doaXRlc3BhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHN0cm9uZ1VzZXJuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhsZW5ndGg6IDI0XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaWdudXBFbWFpbDoge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNpZ251cFBhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBzdHJvbmdQYXNzd29yZDogdHJ1ZSxcclxuICAgICAgICAgICAgbm93aGl0ZXNwYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhsZW5ndGg6IDMyXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGVxdWFsVG86IFwiI3Bhc3NcIixcclxuICAgICAgICAgICAgbm93aGl0ZXNwYWNlOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXNzYWdlczoge1xyXG4gICAgICAgICAgICBzaWdudXBFbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIGFuIGVtYWlsIGFkZHJlc3MuXCIsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufSk7XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XHJcblxyXG4gICAgZXh0cmFWYWxpZGF0aW9uKCk7XHJcblxyXG4gICAgbGV0IHVzZXJuYW1lID0gJChcImlucHV0W25hbWU9J3NpZ251cFVzZXJuYW1lJ11cIikudmFsKCk7XHJcbiAgICBsZXQgZW1haWwgPSAkKFwiaW5wdXRbbmFtZT0nc2lnbnVwRW1haWwnXVwiKS52YWwoKTtcclxuICAgIGxldCBwYXNzd29yZCA9ICQoXCIjcGFzc1wiKS52YWwoKTtcclxuICAgIGxldCBjb25maXJtID0gJChcIiNjb25maXJtUGFzc1wiKS52YWwoKTtcclxuXHJcbiAgICBpZiAodXNlcm5hbWUgPT0gXCJcIiB8fCBlbWFpbCA9PSBcIlwiIHx8IHBhc3N3b3JkID09IFwiXCIgfHwgY29uZmlybSA9PSBcIlwiKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYXNzd29yZCAhPSBjb25maXJtKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIFwidXNlcm5hbWVcIiA6IHVzZXJuYW1lLFxyXG4gICAgICAgIFwiZW1haWxcIiA6IGVtYWlsLFxyXG4gICAgICAgIFwicGFzc3dvcmRcIiA6IHBhc3N3b3JkXHJcbiAgICB9O1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgdXJsOiBcIi91c2Vyc1wiLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2hvbWVcIjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XHJcblxyXG4gICAgICAgICAgIGNvbnN0IGVyclR5cGUgPSAgZXJyLnJlc3BvbnNlSlNPTi5lcnJtc2c7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyVHlwZS5pbmNsdWRlcyhcInVzZXJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIlVzZXJuYW1lIGlzIGFscmVhZHkgaW4gdXNlLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRW1haWwgaXMgYWxyZWFkeSBpbiB1c2UuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gbG9naW4oKSB7XHJcblxyXG4gICAgZXh0cmFDb25maXJtYXRpb24oKTtcclxuXHJcbiAgICBsZXQgZW1haWwgPSAkKFwiaW5wdXRbbmFtZT0nc2lnbmluRW1haWwnXVwiKS52YWwoKTtcclxuICAgIGxldCBwYXNzd29yZCA9ICQoXCIjc2lnbmluUGFzc1wiKS52YWwoKTtcclxuXHJcbiAgICBpZiAoZW1haWwgPT0gXCJcIiB8fCBwYXNzd29yZCA9PSBcIlwiKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVybDogXCIvdXNlcnMvXCIgKyBlbWFpbCxcclxuXHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBcImVtYWlsXCIgOiBlbWFpbCxcclxuICAgICAgICBcInBhc3N3b3JkXCIgOiBwYXNzd29yZFxyXG4gICAgfVxyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgdXJsOiBcIi91c2Vycy9sb2dpblwiLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIGRhdGFUeXBlIDogJ2pzb24nLFxyXG4gICAgICAgIGRhdGEgOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9ob21lXCI7XHJcbiAgICAgICAgICAgIH0gXHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcclxuXHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luRmFpbGVkXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICQoXCIjYnJlYWtUYWdcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbiAgICAvKiBSZW1vdmUgbGFiZWwgYW5kIGZpeCBmb3JtICovXHJcblxyXG4gZnVuY3Rpb24gZml4Rm9ybSgpIHtcclxuICAgICQoXCIjYnJlYWtUYWdcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbkZhaWxlZFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn1cclxuXHJcblxyXG4vKiBFeHRyYSBzdHVmZiAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIGV4dHJhVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoIFwibm93aGl0ZXNwYWNlXCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApXHJcbiAgICAgICAgIHx8IC9eXFxTKyQvaS50ZXN0KCB2YWx1ZSApO1xyXG4gICAgIH0sIFwiTm8gd2hpdGUgc3BhY2UgcGxlYXNlLlwiKTsgICBcclxuICAgICBcclxuICAgICBcclxuICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoJ3N0cm9uZ1VzZXJuYW1lJywgZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgXHJcbiAgICAgICAgICAgfHwgdmFsdWUubGVuZ3RoID49IDZcclxuICAgICAgICAgICAmJiAvW2Etel0vaS50ZXN0KHZhbHVlKTtcclxuICAgICAgIH0sICdVc2VybmFtZSBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nIGFuZCBjb250YWluIGF0IGxlYXN0IG9uZSBsZXR0ZXIuJylcclxuICAgICBcclxuICAgICBcclxuICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoJ3N0cm9uZ1Bhc3N3b3JkJywgZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgXHJcbiAgICAgICAgICAgfHwgdmFsdWUubGVuZ3RoID49IDhcclxuICAgICAgICAgICAmJiAvXFxkLy50ZXN0KHZhbHVlKVxyXG4gICAgICAgICAgICYmIC9bYS16XS9pLnRlc3QodmFsdWUpXHJcbiAgICAgICAgICAgJiYgL1skLS86LT97LX4hXCJeX2BcXFtcXF1dLy50ZXN0KHZhbHVlKTtcclxuICAgICAgIH0sICdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nIGFuZCBjb250YWluIGF0IGxlYXN0IG9uZSBudW1iZXIsIG9uZSBsZXR0ZXIgYW5kIG9uZSBzeW1ib2wuJylcclxuICAgICBcclxuICAgICBcclxuICAgICAkKFwiLnNpZ251cC1mb3JtXCIpLnZhbGlkYXRlKHtcclxuICAgICAgICAgcnVsZXM6IHtcclxuICAgICAgICAgICAgIHNpZ251cFVzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgbm93aGl0ZXNwYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgIHN0cm9uZ1VzZXJuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMjRcclxuICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICBzaWdudXBFbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlXHJcbiAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgc2lnbnVwUGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICBzdHJvbmdQYXNzd29yZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICBub3doaXRlc3BhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMlxyXG4gICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgIGNvbmZpcm1QYXNzd29yZDoge1xyXG4gICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgIGVxdWFsVG86IFwiI3Bhc3NcIixcclxuICAgICAgICAgICAgICAgICBub3doaXRlc3BhY2U6IHRydWVcclxuICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICBtZXNzYWdlczoge1xyXG4gICAgICAgICAgICAgICAgIHNpZ251cEVtYWlsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBlbnRlciBhbiBlbWFpbCBhZGRyZXNzLlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICBlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiXHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgXHJcbiAgICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZXh0cmFDb25maXJtYXRpb24oKSB7XHJcblxyXG4gICAgJChcIi5zaWduaW4tZm9ybVwiKS52YWxpZGF0ZSh7XHJcbiAgICAgICAgcnVsZXM6IHtcclxuICAgICAgICAgICAgc2lnbmluRW1haWw6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2lnbmluUGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiB7XHJcbiAgICAgICAgICAgICAgICBzaWduaW5FbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBlbnRlciBhbiBlbWFpbCBhZGRyZXNzLlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcbn0iXX0=
